
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>hydpy.core.parametertools &#8212; HydPy 2.1-dev documentation</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydPy 2.1-dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for hydpy.core.parametertools</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;This module implements tools for handling the parameters of</span>
<span class="sd">hydrological models.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># import...</span>
<span class="c1"># ...standard</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="c1"># ...third party</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="c1"># ...HydPy specific</span>
<span class="kn">from</span> <span class="nn">hydpy</span> <span class="k">import</span> <span class="n">pub</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">abctools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">autodoctools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">filetools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">objecttools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">timetools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">variabletools</span>

<span class="c1"># The import of `_strptime` is not thread save.  The following call of</span>
<span class="c1"># `strptime` is supposed to prevent possible problems arising from this bug.</span>
<span class="n">time</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="s1">&#39;1999&#39;</span><span class="p">,</span> <span class="s1">&#39;%Y&#39;</span><span class="p">)</span>


<div class="viewcode-block" id="header_controlfile"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.header_controlfile">[docs]</a><span class="k">def</span> <span class="nf">header_controlfile</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">simulationstep</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return the header of a normal or auxiliariy parameter control file.</span>

<span class="sd">    The header contains the default coding information, the import command</span>
<span class="sd">    for the given model and the actual parameter and simulationstep step sizes.</span>

<span class="sd">    The first example shows that, if you pass the model argument as a</span>
<span class="sd">    string, you have to take care that this string make sense:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.parametertools import header_controlfile</span>
<span class="sd">    &gt;&gt;&gt; from hydpy import Period</span>
<span class="sd">    &gt;&gt;&gt; print(header_controlfile(model=&#39;no model class&#39;,</span>
<span class="sd">    ...                          parameterstep=&#39;-1h&#39;,</span>
<span class="sd">    ...                          simulationstep=Period(&#39;1h&#39;)))</span>
<span class="sd">    # -*- coding: utf-8 -*-</span>
<span class="sd">    &lt;BLANKLINE&gt;</span>
<span class="sd">    from hydpy.models.no model class import *</span>
<span class="sd">    &lt;BLANKLINE&gt;</span>
<span class="sd">    simulationstep(&quot;1h&quot;)</span>
<span class="sd">    parameterstep(&quot;-1h&quot;)</span>
<span class="sd">    &lt;BLANKLINE&gt;</span>
<span class="sd">    &lt;BLANKLINE&gt;</span>

<span class="sd">    The second example shows the saver option to pass the proper model</span>
<span class="sd">    object.  It also shows that function |header_controlfile| tries to</span>
<span class="sd">    gain the parameter and simulation step sizes from the global</span>
<span class="sd">    |Timegrids| object contained in module |pub| when necessary:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.models.lland_v1 import *</span>
<span class="sd">    &gt;&gt;&gt; parameterstep(&#39;1d&#39;)</span>
<span class="sd">    &gt;&gt;&gt; from hydpy import pub</span>
<span class="sd">    &gt;&gt;&gt; from hydpy import Timegrids, Timegrid</span>
<span class="sd">    &gt;&gt;&gt; pub.timegrids = Timegrids(Timegrid(&#39;2000.01.01&#39;,</span>
<span class="sd">    ...                                    &#39;2001.01.01&#39;,</span>
<span class="sd">    ...                                    &#39;1h&#39;))</span>
<span class="sd">    &gt;&gt;&gt; print(header_controlfile(model=model))</span>
<span class="sd">    # -*- coding: utf-8 -*-</span>
<span class="sd">    &lt;BLANKLINE&gt;</span>
<span class="sd">    from hydpy.models.lland_v1 import *</span>
<span class="sd">    &lt;BLANKLINE&gt;</span>
<span class="sd">    simulationstep(&quot;1h&quot;)</span>
<span class="sd">    parameterstep(&quot;1d&quot;)</span>
<span class="sd">    &lt;BLANKLINE&gt;</span>
<span class="sd">    &lt;BLANKLINE&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">parameterstep</span><span class="p">(</span><span class="n">parameterstep</span><span class="p">),</span> \
            <span class="n">Parameter</span><span class="o">.</span><span class="n">simulationstep</span><span class="p">(</span><span class="n">simulationstep</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="s1">&#39;# -*- coding: utf-8 -*-</span><span class="se">\n\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;from hydpy.models.</span><span class="si">%s</span><span class="s1"> import *</span><span class="se">\n\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;simulationstep(&quot;</span><span class="si">%s</span><span class="s1">&quot;)</span><span class="se">\n</span><span class="s1">&#39;</span>
                <span class="s1">&#39;parameterstep(&quot;</span><span class="si">%s</span><span class="s1">&quot;)</span><span class="se">\n\n</span><span class="s1">&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">simulationstep</span><span class="p">,</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">parameterstep</span><span class="p">))</span></div>


<div class="viewcode-block" id="IntConstant"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.IntConstant">[docs]</a><span class="k">class</span> <span class="nc">IntConstant</span><span class="p">(</span><span class="nb">int</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for |int| objects with individual docstrings.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">const</span> <span class="o">=</span> <span class="nb">int</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
        <span class="n">const</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span>
        <span class="n">const</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span><span class="p">[</span><span class="s1">&#39;__name__&#39;</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">const</span></div>


<div class="viewcode-block" id="Constants"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Constants">[docs]</a><span class="k">class</span> <span class="nc">Constants</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for defining integer constants for a specific model.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">key</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">IntConstant</span><span class="p">):</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
        <span class="nb">dict</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__module__</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span><span class="p">[</span><span class="s1">&#39;__name__&#39;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_docstrings</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

    <span class="nd">@autodoctools</span><span class="o">.</span><span class="n">make_autodoc_optional</span>
    <span class="k">def</span> <span class="nf">_prepare_docstrings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Assign docstrings to the constants handled by |Constants|</span>
<span class="sd">        to make them available in the interactive mode of Python.&quot;&quot;&quot;</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getsourcefile</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="n">sources</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;&quot;&quot;&quot;&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">code</span><span class="p">,</span> <span class="n">doc</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">sources</span><span class="p">[::</span><span class="mi">2</span><span class="p">],</span> <span class="n">sources</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]):</span>
            <span class="n">code</span> <span class="o">=</span> <span class="n">code</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
            <span class="n">key</span> <span class="o">=</span> <span class="n">code</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">:</span>
                <span class="n">value</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">doc</span></div>


<div class="viewcode-block" id="Parameters"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameters">[docs]</a><span class="k">class</span> <span class="nc">Parameters</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for handling all parameters of a specific model.&quot;&quot;&quot;</span>

    <span class="n">_names_subpars</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;control&#39;</span><span class="p">,</span> <span class="s1">&#39;derived&#39;</span><span class="p">,</span> <span class="s1">&#39;solver&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;model&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">derived</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">solver</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">cythonmodule</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cythonmodule&#39;</span><span class="p">)</span>
        <span class="n">cymodel</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;cymodel&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">cls</span><span class="p">)</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;Parameters&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">SubParameters</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">cythonmodule</span><span class="p">:</span>
                    <span class="n">cls_fastaccess</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">cythonmodule</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
                    <span class="n">subpars</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cls_fastaccess</span><span class="p">,</span> <span class="n">cymodel</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">subpars</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subpars</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">subpars</span><span class="p">)</span>

<div class="viewcode-block" id="Parameters.update"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameters.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call the update methods of all derived and solver parameters.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">subpars</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary_subpars</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="n">subpars</span><span class="o">.</span><span class="n">_PARCLASSES</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">instancename</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">subpars</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                    <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                        <span class="s1">&#39;While trying to update the </span><span class="si">%s</span><span class="s1"> parameter `</span><span class="si">%s</span><span class="s1">` of &#39;</span>
                        <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                        <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">subpars</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Parameters.save_controls"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameters.save_controls">[docs]</a>    <span class="k">def</span> <span class="nf">save_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parameterstep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">simulationstep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">auxfiler</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_controldefaultfilename</span>
            <span class="k">if</span> <span class="n">auxfiler</span><span class="p">:</span>
                <span class="n">variable2auxfile</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">auxfiler</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">),</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">variable2auxfile</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="n">header_controlfile</span><span class="p">(</span>
                     <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">parameterstep</span><span class="p">,</span> <span class="n">simulationstep</span><span class="p">)]</span>
            <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">variable2auxfile</span><span class="p">:</span>
                    <span class="n">auxfilename</span> <span class="o">=</span> <span class="n">variable2auxfile</span><span class="o">.</span><span class="n">get_filename</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">auxfilename</span><span class="p">:</span>
                        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">(auxfile=&#39;</span><span class="si">%s</span><span class="s2">&#39;)</span><span class="se">\n</span><span class="s2">&quot;</span>
                                     <span class="o">%</span> <span class="p">(</span><span class="n">par</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">auxfilename</span><span class="p">))</span>
                        <span class="k">continue</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">par</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">save_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">_controldefaultfilename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="o">==</span> <span class="s1">&#39;?&#39;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s1">&#39;To save the control parameters of a model to a file, its &#39;</span>
                <span class="s1">&#39;filename must be known.  This can be done, by passing &#39;</span>
                <span class="s1">&#39;filename to function `save_controls` directly.  &#39;</span>
                <span class="s1">&#39;But in complete HydPy applications, it is usally &#39;</span>
                <span class="s1">&#39;assumed to be consistent with the name of the element &#39;</span>
                <span class="s1">&#39;handling the model.  Actually, neither a filename is given &#39;</span>
                <span class="s1">&#39;nor does the model know its master element.&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">filename</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span>

<div class="viewcode-block" id="Parameters.verify"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameters.verify">[docs]</a>    <span class="k">def</span> <span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">control</span><span class="p">:</span>
            <span class="n">parameter</span><span class="o">.</span><span class="n">verify</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">derived</span><span class="p">:</span>
            <span class="n">parameter</span><span class="o">.</span><span class="n">verify</span><span class="p">()</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">secondary_subpars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">subpars</span> <span class="ow">in</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">derived</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">solver</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">subpars</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">subpars</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_names_subpars</span><span class="p">:</span>
            <span class="n">subpars</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">subpars</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">yield</span> <span class="n">subpars</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">dir_</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<span class="k">class</span> <span class="nc">_MetaSubParametersType</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">dict_</span><span class="p">):</span>
        <span class="n">parclasses</span> <span class="o">=</span> <span class="n">dict_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;_PARCLASSES&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parclasses</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                <span class="s1">&#39;For class `</span><span class="si">%s</span><span class="s1">`, the required tuple `_PARCLASSES` is not &#39;</span>
                <span class="s1">&#39;defined.  Please see the documentation of class &#39;</span>
                <span class="s1">&#39;`SubParameters` of module `parametertools` for further &#39;</span>
                <span class="s1">&#39;information.&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parclasses</span><span class="p">:</span>
            <span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;</span><span class="se">\n\n\n</span><span class="s1">    The following parameter classes are selected:&#39;</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">parclass</span> <span class="ow">in</span> <span class="n">parclasses</span><span class="p">:</span>
                <span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;      * :class:`~</span><span class="si">%s</span><span class="s1">` </span><span class="si">%s</span><span class="s1">&#39;</span>
                           <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">parclass</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span>
                                        <span class="n">parclass</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)),</span>
                              <span class="n">autodoctools</span><span class="o">.</span><span class="n">description</span><span class="p">(</span><span class="n">parclass</span><span class="p">)))</span>
            <span class="n">doc</span> <span class="o">=</span> <span class="n">dict_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;__doc__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">doc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">doc</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
            <span class="n">dict_</span><span class="p">[</span><span class="s1">&#39;__doc__&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">doc</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">l</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">)</span>
        <span class="k">return</span> <span class="nb">type</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">dict_</span><span class="p">)</span>


<span class="n">_MetaSubParametersClass</span> <span class="o">=</span> <span class="n">_MetaSubParametersType</span><span class="p">(</span><span class="s1">&#39;_MetaSubParametersClass&#39;</span><span class="p">,</span>
                                                 <span class="p">(),</span> <span class="p">{</span><span class="s1">&#39;_PARCLASSES&#39;</span><span class="p">:</span> <span class="p">()})</span>


<div class="viewcode-block" id="SubParameters"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SubParameters">[docs]</a><span class="k">class</span> <span class="nc">SubParameters</span><span class="p">(</span><span class="n">_MetaSubParametersClass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for handling subgroups of model parameters.</span>

<span class="sd">    When trying to implement a new model, one has to define its parameter</span>
<span class="sd">    classes.  Currently, the HydPy framework  distinguishes between control</span>
<span class="sd">    parameters and derived parameters.  These parameter classes should be</span>
<span class="sd">    collected by subclasses of class |SubParameters| called</span>
<span class="sd">    `ControlParameters` or `DerivedParameters` respectivly.  This should be</span>
<span class="sd">    done via the `_PARCLASSES` tuple in the following manner:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.parametertools import SingleParameter, SubParameters</span>
<span class="sd">    &gt;&gt;&gt; class Par2(SingleParameter):</span>
<span class="sd">    ...     pass</span>
<span class="sd">    &gt;&gt;&gt; class Par1(SingleParameter):</span>
<span class="sd">    ...     pass</span>
<span class="sd">    &gt;&gt;&gt; class ControlParameters(SubParameters):</span>
<span class="sd">    ...     _PARCLASSES = (Par2, Par1)</span>

<span class="sd">    The order within the tuple determines the order of iteration, e.g.:</span>

<span class="sd">    &gt;&gt;&gt; control = ControlParameters(None) # Assign `None` for brevity.</span>
<span class="sd">    &gt;&gt;&gt; control</span>
<span class="sd">    par2(nan)</span>
<span class="sd">    par1(nan)</span>

<span class="sd">    If one forgets to define a `_PARCLASSES` tuple so (and maybe tries to</span>
<span class="sd">    add the parameters in the constructor of the subclass of |SubParameters|,</span>
<span class="sd">    the following error is raised:</span>

<span class="sd">    &gt;&gt;&gt; class ControlParameters(SubParameters):</span>
<span class="sd">    ...     pass</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    NotImplementedError: For class `ControlParameters`, the required \</span>
<span class="sd">tuple `_PARCLASSES` is not defined.  Please see the documentation of \</span>
<span class="sd">class `SubParameters` of module `parametertools` for further information.</span>

<span class="sd">    The `in` operator can be used to check if a certain |SubParameters|</span>
<span class="sd">    object handles a certain type of parameter:</span>

<span class="sd">    &gt;&gt;&gt; Par1 in control</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; Par1() in control</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; SingleParameter in control</span>
<span class="sd">    False</span>
<span class="sd">    &gt;&gt;&gt; 1 in control</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    TypeError: The given value `1` of type `int` is neither a \</span>
<span class="sd">parameter class nor a parameter instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_PARCLASSES</span> <span class="o">=</span> <span class="p">()</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pars</span><span class="p">,</span> <span class="n">cls_fastaccess</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cymodel</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pars</span> <span class="o">=</span> <span class="n">pars</span>
        <span class="k">if</span> <span class="n">cls_fastaccess</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">FastAccess</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span> <span class="o">=</span> <span class="n">cls_fastaccess</span><span class="p">()</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="n">cymodel</span><span class="o">.</span><span class="n">parameters</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_PARCLASSES</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">instancename</span><span class="p">(</span><span class="n">par</span><span class="p">),</span> <span class="n">par</span><span class="p">())</span>

<div class="viewcode-block" id="SubParameters.getname"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SubParameters.getname">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getname</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">instancename</span><span class="p">(</span><span class="bp">cls</span><span class="p">)[:</span><span class="o">-</span><span class="mi">10</span><span class="p">]</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getname</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Attributes and methods should usually not be replaced.  Existing</span>
<span class="sd">        |Parameter| attributes are protected in a way, that only their</span>
<span class="sd">        values are changed through assignements.  For new |Parameter|</span>
<span class="sd">        attributes, additional `fastaccess` references are defined.  If you</span>
<span class="sd">        actually want to replace a parameter, you have to delete it first.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="nb">object</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">abctools</span><span class="o">.</span><span class="n">ParameterABC</span><span class="p">):</span>
                <span class="n">value</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">attr</span><span class="o">.</span><span class="n">_setvalue</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s1">&#39;`</span><span class="si">%s</span><span class="s1">` instances do not allow the direct replacement of &#39;</span>
                    <span class="s1">&#39;their members.  After initialization you should usually &#39;</span>
                    <span class="s1">&#39;only change parameter values through assignements.  &#39;</span>
                    <span class="s1">&#39;If you really need to replace a object member, &#39;</span>
                    <span class="s1">&#39;delete it beforehand.&#39;</span> <span class="o">%</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">par</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_PARCLASSES</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">instancename</span><span class="p">(</span><span class="n">par</span><span class="p">)</span>
            <span class="k">yield</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">parameter</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">abctools</span><span class="o">.</span><span class="n">ParameterABC</span><span class="p">):</span>
            <span class="n">parameter</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="n">parameter</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_PARCLASSES</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">parameter</span><span class="p">,</span> <span class="n">abctools</span><span class="o">.</span><span class="n">ParameterABC</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">False</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
            <span class="s1">&#39;The given </span><span class="si">%s</span><span class="s1"> is neither a parameter class &#39;</span>
            <span class="s1">&#39;nor a parameter instance.&#39;</span>
            <span class="o">%</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">value_of_type</span><span class="p">(</span><span class="n">parameter</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reprcomments</span><span class="p">:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;# </span><span class="si">%s</span><span class="s1"> object defined in module </span><span class="si">%s</span><span class="s1">.&#39;</span>
                         <span class="o">%</span> <span class="p">(</span><span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                            <span class="n">objecttools</span><span class="o">.</span><span class="n">modulename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;# The implemented parameters with their actual &#39;</span>
                         <span class="s1">&#39;values are:&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">parameter</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="nb">repr</span><span class="p">(</span><span class="n">parameter</span><span class="p">))</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(?)&#39;</span> <span class="o">%</span> <span class="n">parameter</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">dir_</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<span class="k">class</span> <span class="nc">_Period</span><span class="p">(</span><span class="n">timetools</span><span class="o">.</span><span class="n">Period</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stepsize</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stepsize</span> <span class="o">=</span> <span class="n">stepsize</span>
        <span class="n">timetools</span><span class="o">.</span><span class="n">Period</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stepsize</span><span class="o">.</span><span class="n">period</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">old_period</span> <span class="o">=</span> <span class="n">timetools</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">stepsize</span><span class="o">.</span><span class="vm">__doc__</span>

    <span class="k">def</span> <span class="nf">__enter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stepsize</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">stepsize</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">timedelta</span> <span class="o">=</span> <span class="n">stepsize</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">stepsize</span><span class="o">.</span><span class="n">period</span><span class="o">.</span><span class="n">timedelta</span> <span class="o">=</span> <span class="n">stepsize</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__exit__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">type_</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">traceback</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stepsize</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">old_period</span>

    <span class="k">def</span> <span class="nf">check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stepsize</span><span class="o">.</span><span class="n">EXC_MESSAGE</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">timedelta</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stepsize</span><span class="o">.</span><span class="n">period</span><span class="o">.</span><span class="n">timedelta</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="bp">self</span>


<span class="k">class</span> <span class="nc">_Stepsize</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class of the descriptor classes |Parameterstep| and</span>
<span class="sd">    |Simulationstep|.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="n">timetools</span><span class="o">.</span><span class="n">Period</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__set__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__delete__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">period</span><span class="o">.</span><span class="n">timedelta</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">period</span> <span class="o">=</span> <span class="n">timetools</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">period</span> <span class="o">&gt;=</span> <span class="s1">&#39;1s&#39;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">period</span> <span class="o">=</span> <span class="n">period</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s1">&#39;The smallest step size allowed is one second.&#39;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
            <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                <span class="s1">&#39;While trying to (re)define the general </span><span class="si">%s</span><span class="s1"> size with </span><span class="si">%s</span><span class="s1">&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">value_of_type</span><span class="p">(</span><span class="n">value</span><span class="p">)))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">instancename</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<div class="viewcode-block" id="Parameterstep"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameterstep">[docs]</a><span class="k">class</span> <span class="nc">Parameterstep</span><span class="p">(</span><span class="n">_Stepsize</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The actual parameter time step size.</span>

<span class="sd">    Usually, the time step size of the units of certain parameters</span>
<span class="sd">    is defined within control files via function |parameterstep|.</span>
<span class="sd">    But it can also be changed interactively with the help of any</span>
<span class="sd">    |Parameter| object:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.parametertools import Parameter</span>
<span class="sd">    &gt;&gt;&gt; parameter = Parameter()</span>
<span class="sd">    &gt;&gt;&gt; parameter.parameterstep = &#39;1d&#39;</span>
<span class="sd">    &gt;&gt;&gt; parameter.parameterstep</span>
<span class="sd">    Period(&#39;1d&#39;)</span>

<span class="sd">    Note that setting the step size affects all parameters!</span>

<span class="sd">    Getting the step size via the |Parameter| subclasses themselves</span>
<span class="sd">    works also fine, but use a method call instead of an assignement to</span>
<span class="sd">    change the step size in order to prevent from overwriting the</span>
<span class="sd">    descriptor:</span>

<span class="sd">    &gt;&gt;&gt; Parameter.parameterstep</span>
<span class="sd">    Period(&#39;1d&#39;)</span>
<span class="sd">    &gt;&gt;&gt; Parameter.parameterstep(&#39;2d&#39;)</span>
<span class="sd">    Period(&#39;2d&#39;)</span>

<span class="sd">    Unreasonable assignements result in error messages like the following:</span>

<span class="sd">    &gt;&gt;&gt; parameter.parameterstep = &#39;0d&#39;</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: While trying to (re)define the general parameterstep size \</span>
<span class="sd">with value `0d` of type `str`, the following error occured: The smallest \</span>
<span class="sd">step size allowed is one second.</span>

<span class="sd">    After deleting the parameter step size, an empty period object is returned:</span>

<span class="sd">    &gt;&gt;&gt; del parameter.parameterstep</span>
<span class="sd">    &gt;&gt;&gt; ps = parameter.parameterstep</span>
<span class="sd">    &gt;&gt;&gt; ps</span>
<span class="sd">    Period()</span>

<span class="sd">    In case you prefer an exception instead of an empty period object,</span>
<span class="sd">    call its `check` method:</span>

<span class="sd">    &gt;&gt;&gt; ps.check()</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    RuntimeError: No general parameter step size has been defined.</span>

<span class="sd">    For temporary step size changes, Pythons `with` statement is supported:</span>

<span class="sd">    &gt;&gt;&gt; parameter.parameterstep = &#39;1d&#39;</span>
<span class="sd">    &gt;&gt;&gt; with parameter.parameterstep(&#39;2h&#39;):</span>
<span class="sd">    ...     print(repr(parameter.parameterstep))</span>
<span class="sd">    Period(&#39;2h&#39;)</span>
<span class="sd">    &gt;&gt;&gt; parameter.parameterstep</span>
<span class="sd">    Period(&#39;1d&#39;)</span>

<span class="sd">    Passing |None| means &quot;change nothing in this context&quot; (usefull for</span>
<span class="sd">    defining functions with optional `parameterstep` arguments):</span>

<span class="sd">    &gt;&gt;&gt; with parameter.parameterstep(None):</span>
<span class="sd">    ...     print(repr(parameter.parameterstep))</span>
<span class="sd">    Period(&#39;1d&#39;)</span>
<span class="sd">    &gt;&gt;&gt; parameter.parameterstep</span>
<span class="sd">    Period(&#39;1d&#39;)</span>

<span class="sd">    Deleting the stepsize temporarily, requires calling method `delete`:</span>

<span class="sd">    &gt;&gt;&gt; with parameter.parameterstep.delete():</span>
<span class="sd">    ...     print(repr(parameter.parameterstep))</span>
<span class="sd">    Period()</span>
<span class="sd">    &gt;&gt;&gt; parameter.parameterstep</span>
<span class="sd">    Period(&#39;1d&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">EXC_MESSAGE</span> <span class="o">=</span> <span class="s1">&#39;No general parameter step size has been defined.&#39;</span>

    <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">_Period</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<div class="viewcode-block" id="Simulationstep"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Simulationstep">[docs]</a><span class="k">class</span> <span class="nc">Simulationstep</span><span class="p">(</span><span class="n">_Stepsize</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The actual (or surrogate) simulation time step size.</span>

<span class="sd">    .. testsetup::</span>

<span class="sd">       &gt;&gt;&gt; from hydpy import pub</span>
<span class="sd">       &gt;&gt;&gt; pub.timegrids = None</span>
<span class="sd">       &gt;&gt;&gt; from hydpy.core.parametertools import Parameter</span>
<span class="sd">       &gt;&gt;&gt; Parameter.simulationstep.delete()</span>
<span class="sd">       Period()</span>

<span class="sd">    Usually, the simulation step size is defined globally in module</span>
<span class="sd">    |pub| via a |Timegrids| object, or locally via function |simulationstep|</span>
<span class="sd">    in separate control files.  But you can also change it interactively</span>
<span class="sd">    with the help of |Parameter| objects.</span>

<span class="sd">    Generally, the documentation on class |Parameterstep| also holds</span>
<span class="sd">    true for class |Simulationstep|.  The following explanations</span>
<span class="sd">    focus on the differences only.</span>

<span class="sd">    As long as no usual or surrogate simulation time step is defined, an</span>
<span class="sd">    empty period object is returned, which can be used to raise the</span>
<span class="sd">    following exception:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.parametertools import Parameter</span>
<span class="sd">    &gt;&gt;&gt; parameter = Parameter()</span>
<span class="sd">    &gt;&gt;&gt; ps = parameter.simulationstep</span>
<span class="sd">    &gt;&gt;&gt; ps</span>
<span class="sd">    Period()</span>
<span class="sd">    &gt;&gt;&gt; ps.check()</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    RuntimeError: Neither a global simulation time grid nor a general \</span>
<span class="sd">simulation step size to be used as a surrogate for testing purposes has \</span>
<span class="sd">been defined.</span>

<span class="sd">    For testing or documentation purposes a surrogate step size can be set:</span>

<span class="sd">    &gt;&gt;&gt; parameter.simulationstep = &#39;1d&#39;</span>
<span class="sd">    &gt;&gt;&gt; parameter.simulationstep</span>
<span class="sd">    Period(&#39;1d&#39;)</span>

<span class="sd">    But in complete HydPy applications, changing the simulation step</span>
<span class="sd">    size  would be highly error prone.  Hence, being defined globally</span>
<span class="sd">    within the |pub| module, predefined surrogate values are ignored:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy import pub</span>
<span class="sd">    &gt;&gt;&gt; from hydpy import Timegrids, Timegrid</span>
<span class="sd">    &gt;&gt;&gt; pub.timegrids = Timegrids(Timegrid(&#39;2000.01.01&#39;,</span>
<span class="sd">    ...                                    &#39;2001.01.01&#39;,</span>
<span class="sd">    ...                                    &#39;2h&#39;))</span>
<span class="sd">    &gt;&gt;&gt; parameter.simulationstep</span>
<span class="sd">    Period(&#39;2h&#39;)</span>

<span class="sd">    This priority remains unchanged, even when one tries to set a surrogate</span>
<span class="sd">    value after the timegrid object has been defined:</span>

<span class="sd">    &gt;&gt;&gt; parameter.simulationstep = &#39;5s&#39;</span>
<span class="sd">    &gt;&gt;&gt; parameter.simulationstep</span>
<span class="sd">    Period(&#39;2h&#39;)</span>

<span class="sd">    One has to delete the timegrid object to make the surrogate simulation</span>
<span class="sd">    step size accessible:</span>

<span class="sd">    &gt;&gt;&gt; del pub.timegrids</span>
<span class="sd">    &gt;&gt;&gt; parameter.simulationstep</span>
<span class="sd">    Period(&#39;5s&#39;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">EXC_MESSAGE</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;Neither a global simulation time grid nor a general &#39;</span>
                   <span class="s1">&#39;simulation step size to be used as a surrogate for &#39;</span>
                   <span class="s1">&#39;testing purposes has been defined.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__get__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="bp">cls</span><span class="p">):</span>
        <span class="n">period</span> <span class="o">=</span> <span class="n">_Period</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">period</span><span class="o">.</span><span class="n">timedelta</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">timegrids</span><span class="o">.</span><span class="n">stepsize</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">return</span> <span class="n">period</span></div>


<div class="viewcode-block" id="Parameter"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameter">[docs]</a><span class="k">class</span> <span class="nc">Parameter</span><span class="p">(</span><span class="n">variabletools</span><span class="o">.</span><span class="n">Variable</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for |SingleParameter| and |MultiParameter|.&quot;&quot;&quot;</span>

    <span class="n">NOT_DEEPCOPYABLE_MEMBERS</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;subpars&#39;</span><span class="p">,</span> <span class="s1">&#39;fastaccess&#39;</span><span class="p">)</span>

    <span class="n">parameterstep</span> <span class="o">=</span> <span class="n">Parameterstep</span><span class="p">()</span>
    <span class="n">simulationstep</span> <span class="o">=</span> <span class="n">Simulationstep</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subpars</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">FastAccess</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The prefered way to pass values to |Parameter| instances</span>
<span class="sd">        within parameter control files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;For parameter </span><span class="si">%s</span><span class="s1"> of element </span><span class="si">%s</span><span class="s1"> both positional &#39;</span>
                             <span class="s1">&#39;and keyword arguments are given, which is &#39;</span>
                             <span class="s1">&#39;ambiguous.&#39;</span>
                             <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">args</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;For parameter </span><span class="si">%s</span><span class="s1"> of element </span><span class="si">%s</span><span class="s1"> neither a &#39;</span>
                             <span class="s1">&#39;positional nor a keyword argument is given.&#39;</span>
                             <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">elif</span> <span class="s1">&#39;pyfile&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="n">objecttools</span><span class="o">.</span><span class="n">HydPyDeprecationWarning</span><span class="p">(</span>
                <span class="s1">&#39;The keyword name to define a parameter value in an auxiliary &#39;</span>
                <span class="s1">&#39;control file is now `auxfile`.  The old keyword name &#39;</span>
                <span class="s1">&#39;`pyfile` will be banned in the future.&#39;</span><span class="p">))</span>
            <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getvalues_from_auxiliaryfile</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;pyfile&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_timefactor</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;pyfile&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="s1">&#39;auxfile&#39;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_getvalues_from_auxiliaryfile</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;auxfile&#39;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_timefactor</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;auxfile&#39;</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">args</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_timefactor</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">args</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;The value(s) of parameter </span><span class="si">%s</span><span class="s1"> of &#39;</span>
                                      <span class="s1">&#39;element </span><span class="si">%s</span><span class="s1"> could not be set based on &#39;</span>
                                      <span class="s1">&#39;the given keyword arguments.&#39;</span>
                                      <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                                         <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_getvalues_from_auxiliaryfile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pyfile</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Tries to return the parameter values from the auxiliary control file</span>
<span class="sd">        with the given name.</span>

<span class="sd">        Things are a little complicated here.  To understand this method, you</span>
<span class="sd">        should first take a look at function |parameterstep|.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_back</span><span class="o">.</span><span class="n">f_back</span>
        <span class="k">while</span> <span class="n">frame</span><span class="p">:</span>
            <span class="n">namespace</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_locals</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">subnamespace</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;model&#39;</span><span class="p">:</span> <span class="n">namespace</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">],</span>
                                <span class="s1">&#39;focus&#39;</span><span class="p">:</span> <span class="bp">self</span><span class="p">}</span>
                <span class="k">break</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">f_back</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Something has gone wrong when trying to &#39;</span>
                               <span class="s1">&#39;read parameter `</span><span class="si">%s</span><span class="s1">` from file `</span><span class="si">%s</span><span class="s1">`.&#39;</span>
                               <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">pyfile</span><span class="p">))</span>
        <span class="n">filetools</span><span class="o">.</span><span class="n">ControlManager</span><span class="o">.</span><span class="n">read2dict</span><span class="p">(</span><span class="n">pyfile</span><span class="p">,</span> <span class="n">subnamespace</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">subself</span> <span class="o">=</span> <span class="n">subnamespace</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Something has gone wrong when trying to &#39;</span>
                               <span class="s1">&#39;read parameter `</span><span class="si">%s</span><span class="s1">` from file `</span><span class="si">%s</span><span class="s1">`.&#39;</span>
                               <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">pyfile</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">subself</span><span class="o">.</span><span class="n">values</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">initvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Actual initial value of the given parameter.</span>

<span class="sd">        Some |Parameter| subclasses define a class attribute `INIT`.</span>
<span class="sd">        Let&#39;s define a test class and prepare a function for initializing</span>
<span class="sd">        a parameter object and connecting it to a |SubParameters| object:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy.core import parametertools</span>
<span class="sd">        &gt;&gt;&gt; class Test(parametertools.SingleParameter):</span>
<span class="sd">        ...     NDIM, TYPE, TIME, SPAN = 0, float, None, (None, None)</span>
<span class="sd">        ...     INIT = 2.0</span>
<span class="sd">        &gt;&gt;&gt; def prepare():</span>
<span class="sd">        ...     test = Test()</span>
<span class="sd">        ...     from hydpy.core.parametertools import SubParameters</span>
<span class="sd">        ...     subpars = parametertools.SubParameters(None)</span>
<span class="sd">        ...     test.connect(subpars)</span>
<span class="sd">        ...     return test</span>

<span class="sd">        By default, making use of the `INIT` attribute is disabled:</span>

<span class="sd">        &gt;&gt;&gt; test = prepare()</span>
<span class="sd">        &gt;&gt;&gt; test</span>
<span class="sd">        test(nan)</span>

<span class="sd">        This can be changed through setting |Options.usedefaultvalues| to</span>
<span class="sd">        `True`:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import pub</span>
<span class="sd">        &gt;&gt;&gt; pub.options.usedefaultvalues = True</span>
<span class="sd">        &gt;&gt;&gt; test = prepare()</span>
<span class="sd">        &gt;&gt;&gt; test</span>
<span class="sd">        test(2.0)</span>

<span class="sd">        When no `INIT` attribute is defined, enabling</span>
<span class="sd">        |Options.usedefaultvalues| has no effect, of course:</span>

<span class="sd">        &gt;&gt;&gt; del Test.INIT</span>
<span class="sd">        &gt;&gt;&gt; test = prepare()</span>
<span class="sd">        &gt;&gt;&gt; test</span>
<span class="sd">        test(nan)</span>

<span class="sd">        For time dependent parameter values, the `INIT` attribute is assumed</span>
<span class="sd">        to be related to a |Parameterstep| of one day:</span>

<span class="sd">        &gt;&gt;&gt; test.parameterstep = &#39;2d&#39;</span>
<span class="sd">        &gt;&gt;&gt; test.simulationstep = &#39;12h&#39;</span>
<span class="sd">        &gt;&gt;&gt; Test.INIT = 2.0</span>
<span class="sd">        &gt;&gt;&gt; Test.TIME = True</span>
<span class="sd">        &gt;&gt;&gt; test = prepare()</span>
<span class="sd">        &gt;&gt;&gt; test</span>
<span class="sd">        test(4.0)</span>
<span class="sd">        &gt;&gt;&gt; test.value</span>
<span class="sd">        1.0</span>

<span class="sd">        Note the following `nan` surrogate values for types |bool| and</span>
<span class="sd">        |int| (for |bool|, a better solution should be found):</span>

<span class="sd">        &gt;&gt;&gt; Test.TIME = None</span>
<span class="sd">        &gt;&gt;&gt; Test.TYPE = bool</span>
<span class="sd">        &gt;&gt;&gt; del Test.INIT</span>
<span class="sd">        &gt;&gt;&gt; test = prepare()</span>
<span class="sd">        &gt;&gt;&gt; test</span>
<span class="sd">        test(False)</span>
<span class="sd">        &gt;&gt;&gt; Test.TYPE = int</span>
<span class="sd">        &gt;&gt;&gt; test = prepare()</span>
<span class="sd">        &gt;&gt;&gt; test</span>
<span class="sd">        test(-999999)</span>

<span class="sd">        For not supported types, the following error message is raised:</span>

<span class="sd">        &gt;&gt;&gt; Test.TYPE = list</span>
<span class="sd">        &gt;&gt;&gt; test = prepare()</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        AttributeError: For parameter `test` no `INIT` class attribute is \</span>
<span class="sd">defined, but no standard value for its TYPE `list` is available</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">initvalue</span> <span class="o">=</span> <span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;INIT&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="k">if</span>
                     <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">usedefaultvalues</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">initvalue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">type_</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;TYPE&#39;</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">type_</span> <span class="ow">is</span> <span class="nb">float</span><span class="p">:</span>
                <span class="n">initvalue</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">nan</span>
            <span class="k">elif</span> <span class="n">type_</span> <span class="ow">is</span> <span class="nb">int</span><span class="p">:</span>
                <span class="n">initvalue</span> <span class="o">=</span> <span class="n">variabletools</span><span class="o">.</span><span class="n">_INT_NAN</span>
            <span class="k">elif</span> <span class="n">type_</span> <span class="ow">is</span> <span class="nb">bool</span><span class="p">:</span>
                <span class="n">initvalue</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                    <span class="s1">&#39;For parameter `</span><span class="si">%s</span><span class="s1">` no `INIT` class attribute is defined, &#39;</span>
                    <span class="s1">&#39;but no standard value for its TYPE `</span><span class="si">%s</span><span class="s1">` is available&#39;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="n">type_</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">parameterstep</span><span class="p">(</span><span class="s1">&#39;1d&#39;</span><span class="p">):</span>
                <span class="n">initvalue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_timefactor</span><span class="p">(</span><span class="n">initvalue</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">initvalue</span>

    <span class="k">def</span> <span class="nf">_gettimefactor</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Factor to adapt a new parameter value related to |parameterstep|</span>
<span class="sd">        to a different simulation time step.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">parfactor</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">timegrids</span><span class="o">.</span><span class="n">parfactor</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulationstep</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s1">&#39;The calculation of the effective value of parameter &#39;</span>
                    <span class="s1">&#39;`</span><span class="si">%s</span><span class="s1">` requires a definition of the actual simulation time &#39;</span>
                    <span class="s1">&#39;step.  The simulation time step is project specific.  &#39;</span>
                    <span class="s1">&#39;When initializing the HydPy framework, it is &#39;</span>
                    <span class="s1">&#39;automatically specified under `pub.timegrids.stepsize`.  &#39;</span>
                    <span class="s1">&#39;For testing purposes, one can e.g. alternatively apply &#39;</span>
                    <span class="s1">&#39;the function `simulationstep`.  Please see the &#39;</span>
                    <span class="s1">&#39;documentation for more details.&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">date1</span> <span class="o">=</span> <span class="n">timetools</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="s1">&#39;2000.01.01&#39;</span><span class="p">)</span>
                <span class="n">date2</span> <span class="o">=</span> <span class="n">date1</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulationstep</span>
                <span class="n">parfactor</span> <span class="o">=</span> <span class="n">timetools</span><span class="o">.</span><span class="n">Timegrids</span><span class="p">(</span><span class="n">timetools</span><span class="o">.</span><span class="n">Timegrid</span><span class="p">(</span>
                    <span class="n">date1</span><span class="p">,</span> <span class="n">date2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulationstep</span><span class="p">))</span><span class="o">.</span><span class="n">parfactor</span>
        <span class="k">return</span> <span class="n">parfactor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parameterstep</span><span class="p">)</span>

    <span class="n">timefactor</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_gettimefactor</span><span class="p">)</span>

<div class="viewcode-block" id="Parameter.trim"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameter.trim">[docs]</a>    <span class="k">def</span> <span class="nf">trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">upper</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Apply |trim| of module |variabletools|.&quot;&quot;&quot;</span>
        <span class="n">variabletools</span><span class="o">.</span><span class="n">trim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)</span></div>

<div class="viewcode-block" id="Parameter.warn_trim"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameter.warn_trim">[docs]</a>    <span class="k">def</span> <span class="nf">warn_trim</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s1">&#39;For parameter </span><span class="si">%s</span><span class="s1"> of element </span><span class="si">%s</span><span class="s1"> at least one value &#39;</span>
            <span class="s1">&#39;needed to be trimmed.  Two possible reasons could be &#39;</span>
            <span class="s1">&#39;that the a parameter bound violated or that the values &#39;</span>
            <span class="s1">&#39;of two (or more) different parameters are inconsistent.&#39;</span>
            <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span></div>

<div class="viewcode-block" id="Parameter.apply_timefactor"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameter.apply_timefactor">[docs]</a>    <span class="k">def</span> <span class="nf">apply_timefactor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change the given parameter value/values in accordance with the</span>
<span class="sd">        actual parameter simulation time step if necessary, and return it/them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Note: At least `values /= self.timefactor` is less flexible than</span>
        <span class="c1"># `values = values / self.timefactor` regarding the type of `values`.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">values</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">timefactor</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">values</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">timefactor</span>
        <span class="k">return</span> <span class="n">values</span></div>

<div class="viewcode-block" id="Parameter.revert_timefactor"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameter.revert_timefactor">[docs]</a>    <span class="k">def</span> <span class="nf">revert_timefactor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Change the given parameter value/values inversely in accordance</span>
<span class="sd">        with the actual parameter simulation time step if necessary, and</span>
<span class="sd">        return it/them.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Note: At least `values /= self.timefactor` is less flexible than</span>
        <span class="c1"># `values = values / self.timefactor` regarding the type of `values`.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">values</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">timefactor</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">TIME</span> <span class="ow">is</span> <span class="kc">False</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">values</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">timefactor</span>
        <span class="k">return</span> <span class="n">values</span></div>

<div class="viewcode-block" id="Parameter.commentrepr"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.Parameter.commentrepr">[docs]</a>    <span class="k">def</span> <span class="nf">commentrepr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list with comments, e.g. for making string</span>
<span class="sd">        representations more informative.  When |Options.reprcomments|</span>
<span class="sd">        is set to |False|, an empty list is returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">variabletools</span><span class="o">.</span><span class="n">Variable</span><span class="o">.</span><span class="n">commentrepr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">reprcomments</span> <span class="ow">and</span>
                <span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;TIME&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;# The actual value representation depends on &#39;</span>
                         <span class="s1">&#39;the actual parameter step size,&#39;</span><span class="p">)</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;# which is `</span><span class="si">%s</span><span class="s1">`.&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">parameterstep</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lines</span></div>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">dir_</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>


<span class="n">abctools</span><span class="o">.</span><span class="n">ParameterABC</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Parameter</span><span class="p">)</span>


<div class="viewcode-block" id="SingleParameter"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SingleParameter">[docs]</a><span class="k">class</span> <span class="nc">SingleParameter</span><span class="p">(</span><span class="n">Parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for model parameters handling a single value.&quot;&quot;&quot;</span>
    <span class="n">NDIM</span><span class="p">,</span> <span class="n">TYPE</span><span class="p">,</span> <span class="n">TIME</span><span class="p">,</span> <span class="n">SPAN</span><span class="p">,</span> <span class="n">INIT</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="kc">None</span>

<div class="viewcode-block" id="SingleParameter.connect"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SingleParameter.connect">[docs]</a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subpars</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subpars</span> <span class="o">=</span> <span class="n">subpars</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span> <span class="o">=</span> <span class="n">subpars</span><span class="o">.</span><span class="n">fastaccess</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">initvalue</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_getshape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;An empty tuple.  (Only intended for increasing consistent usability</span>
<span class="sd">        of |SingleParameter| and |MultiParameter| instances.)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">()</span>

    <span class="k">def</span> <span class="nf">_setshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;The shape information of `SingleParameters` &#39;</span>
                           <span class="s1">&#39;as `</span><span class="si">%s</span><span class="s1">` cannot be changed.&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="n">shape</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getshape</span><span class="p">,</span> <span class="n">_setshape</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The actual parameter value handled by the respective</span>
<span class="sd">        |SingleParameter| instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%d</span><span class="s1"> values are assigned to the scalar &#39;</span>
                                 <span class="s1">&#39;parameter `</span><span class="si">%s</span><span class="s1">`, which is ambiguous.&#39;</span>
                                 <span class="o">%</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">temp</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">TypeError</span><span class="p">,</span> <span class="ne">IndexError</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;When trying to set the value of parameter `</span><span class="si">%s</span><span class="s1">`, &#39;</span>
                            <span class="s1">&#39;it was not possible to convert `</span><span class="si">%s</span><span class="s1">` to type &#39;</span>
                            <span class="s1">&#39;`</span><span class="si">%s</span><span class="s1">`.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span>
                                       <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">)))</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="n">value</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getvalue</span><span class="p">,</span> <span class="n">_setvalue</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">value</span>

<div class="viewcode-block" id="SingleParameter.verify"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SingleParameter.verify">[docs]</a>    <span class="k">def</span> <span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Raises a |RuntimeError| if the value of the instance of the</span>
<span class="sd">        respective subclass of |SingleParameter| is `nan`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;The value of parameter `</span><span class="si">%s</span><span class="s1">` has not been &#39;</span>
                               <span class="s1">&#39;set yet.&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns 1.  (This method is only intended for increasing consistent</span>
<span class="sd">        usability of |SingleParameter| and |MultiParameter| instances.)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;The only allowed index for scalar parameters &#39;</span>
                             <span class="s1">&#39;like `</span><span class="si">%s</span><span class="s1">` is `0` (or `:`), but `</span><span class="si">%s</span><span class="s1">` is given.&#39;</span>
                             <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;The only allowed index for scalar parameters &#39;</span>
                             <span class="s1">&#39;like `</span><span class="si">%s</span><span class="s1">` is `0` (or `:`), but `</span><span class="si">%s</span><span class="s1">` is given.&#39;</span>
                             <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commentrepr</span><span class="p">()</span>
        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(</span><span class="si">%s</span><span class="s1">)&#39;</span>
                     <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                        <span class="n">objecttools</span><span class="o">.</span><span class="n">repr_</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">revert_timefactor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">))))</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div>


<div class="viewcode-block" id="MultiParameter"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.MultiParameter">[docs]</a><span class="k">class</span> <span class="nc">MultiParameter</span><span class="p">(</span><span class="n">Parameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for model parameters handling multiple values.&quot;&quot;&quot;</span>
    <span class="n">NDIM</span><span class="p">,</span> <span class="n">TYPE</span><span class="p">,</span> <span class="n">TIME</span><span class="p">,</span> <span class="n">SPAN</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

<div class="viewcode-block" id="MultiParameter.connect"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.MultiParameter.connect">[docs]</a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subpars</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">subpars</span> <span class="o">=</span> <span class="n">subpars</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span> <span class="o">=</span> <span class="n">subpars</span><span class="o">.</span><span class="n">fastaccess</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_getshape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A tuple containing the lengths in all dimensions of the parameter</span>
<span class="sd">        values.  Note that setting a new shape results in a loss of all values</span>
<span class="sd">        of the respective parameter.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">shape</span>
            <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">shape</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Shape information for parameter `</span><span class="si">%s</span><span class="s1">` &#39;</span>
                               <span class="s1">&#39;can only be retrieved after it has been &#39;</span>
                               <span class="s1">&#39;defined.&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">array</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="n">shape</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">initvalue</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
            <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                <span class="s1">&#39;While trying create a new numpy ndarray` for parameter `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">array</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">NDIM</span><span class="p">:</span>
            <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">array</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Parameter `</span><span class="si">%s</span><span class="s1">` is </span><span class="si">%d</span><span class="s1">-dimensional but the &#39;</span>
                <span class="s1">&#39;given shape indicates </span><span class="si">%d</span><span class="s1"> dimensions.&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">NDIM</span><span class="p">,</span> <span class="n">array</span><span class="o">.</span><span class="n">ndim</span><span class="p">))</span>

    <span class="n">shape</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getshape</span><span class="p">,</span> <span class="n">_setshape</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The actual parameter value(s) handled by the respective</span>
<span class="sd">        |Parameter| instance.  For consistency, `value` and `values`</span>
<span class="sd">        can always be used interchangeably.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_setvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">value</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;The values `</span><span class="si">%s</span><span class="s1">` cannot be converted to a numpy ndarray &#39;</span>
                <span class="s1">&#39;with shape </span><span class="si">%s</span><span class="s1"> containing entries of type </span><span class="si">%s</span><span class="s1">.&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">TYPE</span><span class="p">)))</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="n">value</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getvalue</span><span class="p">,</span> <span class="n">_setvalue</span><span class="p">)</span>
    <span class="n">values</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_getverifymask</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A numpy array with all entries being |True| of the same</span>
<span class="sd">        shape as the values handled by the respective parameter.  All entries</span>
<span class="sd">        being |True| indicates that the method |MultiParameter.verify|</span>
<span class="sd">        checks all entries of the numpy array storing the parameter values.</span>
<span class="sd">        Overwrite |MultiParameter.verify| for |MultiParameter|</span>
<span class="sd">        subclasses, where certain entries do not to be checked.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>

    <span class="n">verifymask</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getverifymask</span><span class="p">)</span>

<div class="viewcode-block" id="MultiParameter.verify"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.MultiParameter.verify">[docs]</a>    <span class="k">def</span> <span class="nf">verify</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Raises a |RuntimeError| if at least one of the required values</span>
<span class="sd">        of the instance of the respective subclass of |MultiParameter| is</span>
<span class="sd">        |None| or |numpy.nan|. The property |MultiParameter.verifymask|</span>
<span class="sd">        defines, which values are considered to be necessary.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s1">&#39;The values of parameter `</span><span class="si">%s</span><span class="s1">` have not been set yet.&#39;</span>
                <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="n">nmbnan</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">verifymask</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">nmbnan</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s1">&#39;For parameter `</span><span class="si">%s</span><span class="s1">`, </span><span class="si">%d</span><span class="s1"> required values have &#39;</span>
                <span class="s1">&#39;not been set yet.&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">nmbnan</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns the number of values handled by the |MultiParameter|</span>
<span class="sd">        instance.  It is required, that the `shape` has been set beforehand,</span>
<span class="sd">        which specifies the length in each dimension.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cumprod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_raiseitemexception</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_raiseitemexception</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_raiseitemexception</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s1">&#39;Parameter `</span><span class="si">%s</span><span class="s1">` has no values so far.&#39;</span>
                <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                <span class="s1">&#39;While trying to item access the values of parameter `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

<div class="viewcode-block" id="MultiParameter.compress_repr"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.MultiParameter.compress_repr">[docs]</a>    <span class="k">def</span> <span class="nf">compress_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a compressed parameter value string, which is (in</span>
<span class="sd">        accordance with |MultiParameter.NDIM|) contained in a nested list.</span>
<span class="sd">        If the compression fails, a |NotImplementedError| is raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">unique</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">numpy</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">unique</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">sum</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">unique</span><span class="p">))</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique</span><span class="o">.</span><span class="n">flatten</span><span class="p">()):</span>
            <span class="n">unique</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">numpy</span><span class="o">.</span><span class="n">nan</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">unique</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">revert_timefactor</span><span class="p">(</span><span class="n">unique</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">repr_</span><span class="p">(</span><span class="n">unique</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">dummy</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NDIM</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
                <span class="s1">&#39;For parameter `</span><span class="si">%s</span><span class="s1">` there is no compression method &#39;</span>
                <span class="s1">&#39;implemented, working for its actual values.&#39;</span>
                <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">compress_repr</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="n">islong</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">255</span>
            <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">revert_timefactor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
            <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                <span class="s1">&#39;While trying to find a compressed &#39;</span>
                <span class="s1">&#39;string representation for parameter `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">islong</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">Parameter</span><span class="o">.</span><span class="n">repr_</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">islong</span><span class="p">)</span></div>


<div class="viewcode-block" id="ZipParameter"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.ZipParameter">[docs]</a><span class="k">class</span> <span class="nc">ZipParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for model parameters handling multiple values that</span>
<span class="sd">    offers additional keyword zipping fuctionality.</span>

<span class="sd">    When inheriting an actual parameter class from |ZipParameter| one</span>
<span class="sd">    needs to define suitable class constants |ZipParameter.REQUIRED_VALUES|</span>
<span class="sd">    (a |tuple|) and |ZipParameter.MODEL_CONSTANTS| (a |dict|).</span>
<span class="sd">    Additionally, a property named `refparameter` must be defined.</span>

<span class="sd">    The implementation and functioning of subclasses of |ZipParameter|</span>
<span class="sd">    is best illustrated by an example: see the documentation of the class</span>
<span class="sd">    |MultiParameter| of the HydPy-H-Land model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">REQUIRED_VALUES</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">MODEL_CONSTANTS</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The prefered way to pass values to |Parameter| instances</span>
<span class="sd">        within parameter control files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">Parameter</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">refvalues</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">refparameter</span><span class="o">.</span><span class="n">values</span>
                <span class="k">if</span> <span class="nb">min</span><span class="p">(</span><span class="n">refvalues</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                        <span class="s1">&#39;Parameter </span><span class="si">%s</span><span class="s1"> does not seem to be prepared properly &#39;</span>
                        <span class="s1">&#39;for element </span><span class="si">%s</span><span class="s1">.  Hence, setting values for &#39;</span>
                        <span class="s1">&#39;parameter </span><span class="si">%s</span><span class="s1"> via keyword arguments is not possible.&#39;</span>
                        <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">refparameter</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                           <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">sel</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODEL_CONSTANTS</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">upper</span><span class="p">())</span>
                    <span class="k">if</span> <span class="n">sel</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">exc</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">refvalues</span> <span class="o">==</span> <span class="n">sel</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_timefactor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">trim</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">exc</span>

    <span class="k">def</span> <span class="nf">_getshape</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a tuple containing the lengths in all dimensions of the</span>
<span class="sd">        parameter values.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">MultiParameter</span><span class="o">.</span><span class="n">_getshape</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;Shape information for parameter `</span><span class="si">%s</span><span class="s1">` can &#39;</span>
                               <span class="s1">&#39;only be retrieved after it has been defined. &#39;</span>
                               <span class="s1">&#39; You can do this manually, but usually it is &#39;</span>
                               <span class="s1">&#39;done automatically by defining the value of &#39;</span>
                               <span class="s1">&#39;parameter `</span><span class="si">%s</span><span class="s1">` first in each parameter &#39;</span>
                               <span class="s1">&#39;control file.&#39;</span>
                               <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">shapeparameter</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>

    <span class="n">shape</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getshape</span><span class="p">,</span> <span class="n">MultiParameter</span><span class="o">.</span><span class="n">_setshape</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getverifymask</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A numpy array of the same shape as the value array handled</span>
<span class="sd">        by the respective parameter.  `True` entries indicate that certain</span>
<span class="sd">        parameter values are required, which depends on the tuple</span>
<span class="sd">        `REQUIRED_VALUES` of the respective subclass.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="nb">bool</span><span class="p">)</span>
        <span class="n">refvalues</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">refparameter</span><span class="o">.</span><span class="n">values</span>
        <span class="k">for</span> <span class="n">reqvalue</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">REQUIRED_VALUES</span><span class="p">:</span>
            <span class="n">mask</span><span class="p">[</span><span class="n">refvalues</span> <span class="o">==</span> <span class="n">reqvalue</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">mask</span>

    <span class="n">verifymask</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getverifymask</span><span class="p">)</span>

<div class="viewcode-block" id="ZipParameter.compress_repr"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.ZipParameter.compress_repr">[docs]</a>    <span class="k">def</span> <span class="nf">compress_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a compressed parameter value string, which is (in</span>
<span class="sd">        accordance with `NDIM`) contained in a nested list.  If the</span>
<span class="sd">        compression fails, a |NotImplementedError| is raised.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">MultiParameter</span><span class="o">.</span><span class="n">compress_repr</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="n">refvalues</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">refparameter</span><span class="o">.</span><span class="n">values</span>
            <span class="k">if</span> <span class="nb">min</span><span class="p">(</span><span class="n">refvalues</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;Parameter </span><span class="si">%s</span><span class="s1"> is not defined &#39;</span>
                                          <span class="s1">&#39;poperly, which circumvents finding &#39;</span>
                                          <span class="s1">&#39;a suitable compressed.&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">MODEL_CONSTANTS</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">REQUIRED_VALUES</span><span class="p">:</span>
                    <span class="n">unique</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">refvalues</span> <span class="o">==</span> <span class="n">value</span><span class="p">])</span>
                    <span class="n">unique</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">revert_timefactor</span><span class="p">(</span><span class="n">unique</span><span class="p">)</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">=</span><span class="si">%s</span><span class="s1">&#39;</span>
                                       <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="o">.</span><span class="n">lower</span><span class="p">(),</span>
                                          <span class="n">objecttools</span><span class="o">.</span><span class="n">repr_</span><span class="p">(</span><span class="n">unique</span><span class="p">[</span><span class="mi">0</span><span class="p">])))</span>
                    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">unique</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="k">raise</span> <span class="n">exc</span>
            <span class="n">result</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
            <span class="k">for</span> <span class="n">dummy</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">NDIM</span><span class="p">):</span>
                <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="n">result</span><span class="p">]</span>
            <span class="k">return</span> <span class="n">result</span></div></div>


<div class="viewcode-block" id="SeasonalParameter"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SeasonalParameter">[docs]</a><span class="k">class</span> <span class="nc">SeasonalParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Class for the flexible handling of parameters with anual cycles.</span>

<span class="sd">    Let us prepare a 1-dimensional |SeasonalParameter| instance:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.parametertools import SeasonalParameter</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter = SeasonalParameter()</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter.NDIM = 1</span>

<span class="sd">    For the following examples, we assume a simulation step size of one day:</span>

<span class="sd">    &gt;&gt;&gt; seasonalparameter.simulationstep = &#39;1d&#39;</span>

<span class="sd">    To define its shape, the first entry of the assigned |tuple|</span>
<span class="sd">    object is ignored:</span>

<span class="sd">    &gt;&gt;&gt; seasonalparameter.shape = (None,)</span>

<span class="sd">    Instead it is derived from the `simulationstep` defined above:</span>

<span class="sd">    &gt;&gt;&gt; seasonalparameter.shape</span>
<span class="sd">    (366,)</span>

<span class="sd">    The annual pattern of seasonal parameters is defined through pairs of</span>
<span class="sd">    |TOY| objects and different values (e.g. of type |float|).  One can</span>
<span class="sd">    define them all at once in the following manner:</span>

<span class="sd">    &gt;&gt;&gt; seasonalparameter(_1=2., _7_1=4., _3_1_0_0_0=5.)</span>

<span class="sd">    Note that, as |str| objects, all keywords in the call above would</span>
<span class="sd">    be proper |TOY| initialization arguments. If they are not properly</span>
<span class="sd">    written, the following exception is raised:</span>

<span class="sd">    &gt;&gt;&gt; SeasonalParameter()(_a=1.)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: While trying to define the seasonal parameter value \</span>
<span class="sd">`seasonalparameter` of element `?` for time of year `_a`, the following \</span>
<span class="sd">error occured: While trying to retrieve the month for TOY (time of year) \</span>
<span class="sd">object based on the string `_a`, the following error occured: \</span>
<span class="sd">For TOY (time of year) objects, all properties must be of type `int`, \</span>
<span class="sd">but the value `a` of type `str` given for property `month` cannot be \</span>
<span class="sd">converted to `int`.</span>

<span class="sd">    As the following string representation shows, are the pairs of each</span>
<span class="sd">    |SeasonalParameter| instance automatically sorted:</span>

<span class="sd">    &gt;&gt;&gt; seasonalparameter</span>
<span class="sd">    seasonalparameter(toy_1_1_0_0_0=2.0,</span>
<span class="sd">                      toy_3_1_0_0_0=5.0,</span>
<span class="sd">                      toy_7_1_0_0_0=4.0)</span>

<span class="sd">    By default, `toy` is used as a prefix string.  Using this prefix string,</span>
<span class="sd">    one can change the toy-value pairs via attribute access:</span>

<span class="sd">    &gt;&gt;&gt; seasonalparameter.toy_1_1_0_0_0</span>
<span class="sd">    2.0</span>
<span class="sd">    &gt;&gt;&gt; del seasonalparameter.toy_1_1_0_0_0</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter.toy_2_1_0_0_0 = 2.</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter</span>
<span class="sd">    seasonalparameter(toy_2_1_0_0_0=2.0,</span>
<span class="sd">                      toy_3_1_0_0_0=5.0,</span>
<span class="sd">                      toy_7_1_0_0_0=4.0)</span>

<span class="sd">    On applying function |len| on |SeasonalParameter| objects, the number</span>
<span class="sd">    of toy-value pairs is returned:</span>

<span class="sd">    &gt;&gt;&gt; len(seasonalparameter)</span>
<span class="sd">    3</span>

<span class="sd">    New values are checked to be compatible predefined shape:</span>

<span class="sd">    &gt;&gt;&gt; seasonalparameter.toy_1_1_0_0_0 = [1., 2.]</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    TypeError: While trying to add a new or change an existing toy-value \</span>
<span class="sd">pair for the seasonal parameter `seasonalparameter` of element `?`, the \</span>
<span class="sd">following error occured: float() argument must be a string or a number...</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter = SeasonalParameter()</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter.NDIM = 2</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter.shape = (None, 3)</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter.toy_1_1_0_0_0 = [1., 2.]</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: While trying to add a new or change an existing toy-value \</span>
<span class="sd">pair for the seasonal parameter `seasonalparameter` of element `?`, the \</span>
<span class="sd">following error occured: could not broadcast input array from shape (2) \</span>
<span class="sd">into shape (3)</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter.toy_1_1_0_0_0 = [1., 2., 3.]</span>
<span class="sd">    &gt;&gt;&gt; seasonalparameter</span>
<span class="sd">    seasonalparameter(toy_1_1_0_0_0=[1.0, 2.0, 3.0])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">MultiParameter</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The prefered way to pass values to |Parameter| instances</span>
<span class="sd">        within parameter control files.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">NDIM</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="kc">None</span><span class="p">,)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">MultiParameter</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span><span class="p">[</span><span class="n">timetools</span><span class="o">.</span><span class="n">TOY</span><span class="p">()]</span> <span class="o">=</span> <span class="bp">self</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">BaseException</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="k">for</span> <span class="p">(</span><span class="n">toystr</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">try</span><span class="p">:</span>
                        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">timetools</span><span class="o">.</span><span class="n">TOY</span><span class="p">(</span><span class="n">toystr</span><span class="p">)),</span> <span class="n">values</span><span class="p">)</span>
                    <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                        <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                            <span class="s1">&#39;While trying to define the seasonal parameter &#39;</span>
                            <span class="s1">&#39;value `</span><span class="si">%s</span><span class="s1">` of element `</span><span class="si">%s</span><span class="s1">` for time of year `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                            <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
                               <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                               <span class="n">toystr</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">exc</span>

<div class="viewcode-block" id="SeasonalParameter.refresh"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SeasonalParameter.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Update the actual simulation values based on the toy-value pairs.</span>

<span class="sd">        Usually, one does not need to call refresh explicitly, as it is</span>
<span class="sd">        called by methods __call__, __setattr__ and __delattr__ automatically,</span>
<span class="sd">        when required.</span>

<span class="sd">        Instantiate a 1-dimensional |SeasonalParameter| object:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy.core.parametertools import SeasonalParameter</span>
<span class="sd">        &gt;&gt;&gt; sp = SeasonalParameter()</span>
<span class="sd">        &gt;&gt;&gt; sp.simulationstep = &#39;1d&#39;</span>
<span class="sd">        &gt;&gt;&gt; sp.NDIM = 1</span>
<span class="sd">        &gt;&gt;&gt; sp.shape = (None,)</span>

<span class="sd">        When a |SeasonalParameter| object does not contain any toy-value</span>
<span class="sd">        pairs yet, the method |SeasonalParameter.refresh| sets all actual</span>
<span class="sd">        simulation values to zero:</span>

<span class="sd">        &gt;&gt;&gt; sp.values = 1.</span>
<span class="sd">        &gt;&gt;&gt; sp.refresh()</span>
<span class="sd">        &gt;&gt;&gt; sp.values[0]</span>
<span class="sd">        0.0</span>

<span class="sd">        When there is only one toy-value pair, its values are taken for</span>
<span class="sd">        all actual simulation values:</span>

<span class="sd">        &gt;&gt;&gt; sp.toy_1 = 2. # calls refresh automatically</span>
<span class="sd">        &gt;&gt;&gt; sp.values[0]</span>
<span class="sd">        2.0</span>

<span class="sd">        Method |SeasonalParameter.refresh| performs a linear interpolation</span>
<span class="sd">        for the central time points of each simulation time step.  Hence,</span>
<span class="sd">        in the following example the original values of the toy-value pairs</span>
<span class="sd">        do not show up:</span>

<span class="sd">        &gt;&gt;&gt; sp.toy_12_31 = 4.</span>
<span class="sd">        &gt;&gt;&gt; from hydpy import round_</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.values[0])</span>
<span class="sd">        2.00274</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.values[-2])</span>
<span class="sd">        3.99726</span>
<span class="sd">        &gt;&gt;&gt; sp.values[-1]</span>
<span class="sd">        3.0</span>

<span class="sd">        If one wants to preserve the original values in this example, one</span>
<span class="sd">        would have to set the corresponding toy instances in the middle of</span>
<span class="sd">        some simulation step intervals:</span>

<span class="sd">        &gt;&gt;&gt; del sp.toy_1</span>
<span class="sd">        &gt;&gt;&gt; del sp.toy_12_31</span>
<span class="sd">        &gt;&gt;&gt; sp.toy_1_1_12 = 2</span>
<span class="sd">        &gt;&gt;&gt; sp.toy_12_31_12 = 4.</span>
<span class="sd">        &gt;&gt;&gt; sp.values[0]</span>
<span class="sd">        2.0</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.values[1])</span>
<span class="sd">        2.005479</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.values[-2])</span>
<span class="sd">        3.994521</span>
<span class="sd">        &gt;&gt;&gt; sp.values[-1]</span>
<span class="sd">        4.0</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[:]</span> <span class="o">=</span> <span class="mf">0.</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span><span class="o">.</span><span class="n">values</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[:]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_timefactor</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">timegrid</span> <span class="o">=</span> <span class="n">timetools</span><span class="o">.</span><span class="n">Timegrid</span><span class="p">(</span>
                <span class="n">timetools</span><span class="o">.</span><span class="n">TOY</span><span class="o">.</span><span class="n">_STARTDATE</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">simulationstep</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                <span class="n">timetools</span><span class="o">.</span><span class="n">TOY</span><span class="o">.</span><span class="n">_ENDDATE</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">simulationstep</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">simulationstep</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="n">date</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">timegrid</span><span class="p">):</span>
                <span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_timefactor</span><span class="p">(</span><span class="n">values</span><span class="p">)</span></div>

<div class="viewcode-block" id="SeasonalParameter.interp"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SeasonalParameter.interp">[docs]</a>    <span class="k">def</span> <span class="nf">interp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Perform a linear value interpolation for a date defined by the</span>
<span class="sd">        passed |Date| object and return the result.</span>

<span class="sd">        Instantiate a 1-dimensional |SeasonalParameter| object:</span>

<span class="sd">        &gt;&gt;&gt; sp = SeasonalParameter()</span>
<span class="sd">        &gt;&gt;&gt; from hydpy import Date, Period</span>
<span class="sd">        &gt;&gt;&gt; sp.simulationstep = Period(&#39;1d&#39;)</span>
<span class="sd">        &gt;&gt;&gt; sp.NDIM = 1</span>
<span class="sd">        &gt;&gt;&gt; sp.shape = (None,)</span>

<span class="sd">        Define three toy-value pairs:</span>
<span class="sd">        &gt;&gt;&gt; sp(_1=2.0, _2=5.0, _12_31=4.0)</span>

<span class="sd">        Passing a |Date| object excatly matching a |TOY| object of course</span>
<span class="sd">        simply returns the associated value:</span>

<span class="sd">        &gt;&gt;&gt; sp.interp(Date(&#39;2000.01.01&#39;))</span>
<span class="sd">        2.0</span>
<span class="sd">        &gt;&gt;&gt; sp.interp(Date(&#39;2000.02.01&#39;))</span>
<span class="sd">        5.0</span>
<span class="sd">        &gt;&gt;&gt; sp.interp(Date(&#39;2000.12.31&#39;))</span>
<span class="sd">        4.0</span>

<span class="sd">        For all intermediate points, a linear interpolation is performed:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import round_</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.interp(Date(&#39;2000.01.02&#39;)))</span>
<span class="sd">        2.096774</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.interp(Date(&#39;2000.01.31&#39;)))</span>
<span class="sd">        4.903226</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.interp(Date(&#39;2000.02.02&#39;)))</span>
<span class="sd">        4.997006</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.interp(Date(&#39;2000.12.30&#39;)))</span>
<span class="sd">        4.002994</span>

<span class="sd">        Linear interpolation is also allowed between the first and the</span>
<span class="sd">        last pair, when they do not capture the end points of the year:</span>

<span class="sd">        &gt;&gt;&gt; sp(_1_2=2.0, _12_30=4.0)</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.interp(Date(&#39;2000.12.29&#39;)))</span>
<span class="sd">        3.99449</span>
<span class="sd">        &gt;&gt;&gt; sp.interp(Date(&#39;2000.12.30&#39;))</span>
<span class="sd">        4.0</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.interp(Date(&#39;2000.12.31&#39;)))</span>
<span class="sd">        3.333333</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.interp(Date(&#39;2000.01.01&#39;)))</span>
<span class="sd">        2.666667</span>
<span class="sd">        &gt;&gt;&gt; sp.interp(Date(&#39;2000.01.02&#39;))</span>
<span class="sd">        2.0</span>
<span class="sd">        &gt;&gt;&gt; round_(sp.interp(Date(&#39;2000.01.03&#39;)))</span>
<span class="sd">        2.00551</span>

<span class="sd">        The following example briefly shows interpolation performed for</span>
<span class="sd">        2-dimensional parameter:</span>

<span class="sd">        &gt;&gt;&gt; sp = SeasonalParameter()</span>
<span class="sd">        &gt;&gt;&gt; from hydpy import Date, Period</span>
<span class="sd">        &gt;&gt;&gt; sp.simulationstep = Period(&#39;1d&#39;)</span>
<span class="sd">        &gt;&gt;&gt; sp.NDIM = 2</span>
<span class="sd">        &gt;&gt;&gt; sp.shape = (None, 2)</span>
<span class="sd">        &gt;&gt;&gt; sp(_1_1=[1., 2.], _1_3=[-3, 0.])</span>
<span class="sd">        &gt;&gt;&gt; result = sp.interp(Date(&#39;2000.01.02&#39;))</span>
<span class="sd">        &gt;&gt;&gt; round_(result[0])</span>
<span class="sd">        -1.0</span>
<span class="sd">        &gt;&gt;&gt; round_(result[1])</span>
<span class="sd">        1.0</span>
<span class="sd">    &quot;&quot;&quot;</span>
        <span class="n">xnew</span> <span class="o">=</span> <span class="n">timetools</span><span class="o">.</span><span class="n">TOY</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
        <span class="n">xys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">x_1</span><span class="p">,</span> <span class="n">y_1</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">xys</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">x_1</span> <span class="o">&gt;</span> <span class="n">xnew</span><span class="p">:</span>
                <span class="n">x_0</span><span class="p">,</span> <span class="n">y_0</span> <span class="o">=</span> <span class="n">xys</span><span class="p">[</span><span class="n">idx</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">x_0</span><span class="p">,</span> <span class="n">y_0</span> <span class="o">=</span> <span class="n">xys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">x_1</span><span class="p">,</span> <span class="n">y_1</span> <span class="o">=</span> <span class="n">xys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">y_0</span><span class="o">+</span><span class="p">(</span><span class="n">y_1</span><span class="o">-</span><span class="n">y_0</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">x_1</span><span class="o">-</span><span class="n">x_0</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">xnew</span><span class="o">-</span><span class="n">x_0</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_setshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">shape</span><span class="p">),)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">shape</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">simulationstep</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s1">&#39;It is not possible the set the shape of the seasonal &#39;</span>
                <span class="s1">&#39;parameter `</span><span class="si">%s</span><span class="s1">` of element `</span><span class="si">%s</span><span class="s1">` at the moment.  You can &#39;</span>
                <span class="s1">&#39;define it manually.  In complete HydPy projects it is &#39;</span>
                <span class="s1">&#39;indirectly defined via `pub.timegrids.stepsize` &#39;</span>
                <span class="s1">&#39;automatically.&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">timetools</span><span class="o">.</span><span class="n">Period</span><span class="p">(</span><span class="s1">&#39;366d&#39;</span><span class="p">)</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">simulationstep</span>
        <span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">ceil</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">10</span><span class="p">)))</span>
        <span class="n">MultiParameter</span><span class="o">.</span><span class="n">_setshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shape</span><span class="p">)</span>

    <span class="n">shape</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">MultiParameter</span><span class="o">.</span><span class="n">_getshape</span><span class="p">,</span> <span class="n">_setshape</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">toy</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
            <span class="k">yield</span> <span class="p">(</span><span class="n">toy</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span><span class="p">[</span><span class="n">toy</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;toy_&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span><span class="p">[</span><span class="n">timetools</span><span class="o">.</span><span class="n">TOY</span><span class="p">(</span><span class="n">name</span><span class="p">)]</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                    <span class="s1">&#39;While trying to get an existing toy-value pair for &#39;</span>
                    <span class="s1">&#39;the seasonal parameter `</span><span class="si">%s</span><span class="s1">` of element `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">MultiParameter</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;toy_&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">NDIM</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">full</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">value</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span><span class="p">[</span><span class="n">timetools</span><span class="o">.</span><span class="n">TOY</span><span class="p">(</span><span class="n">name</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                    <span class="s1">&#39;While trying to add a new or change an existing &#39;</span>
                    <span class="s1">&#39;toy-value pair for the seasonal parameter `</span><span class="si">%s</span><span class="s1">` of &#39;</span>
                    <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">`&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">MultiParameter</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__delattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;toy_&#39;</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span><span class="p">[</span><span class="n">timetools</span><span class="o">.</span><span class="n">TOY</span><span class="p">(</span><span class="n">name</span><span class="p">)]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                    <span class="s1">&#39;While trying to delete an existing toy-value pair for &#39;</span>
                    <span class="s1">&#39;the seasonal parameter `</span><span class="si">%s</span><span class="s1">` of element `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">MultiParameter</span><span class="o">.</span><span class="fm">__delattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">NDIM</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">assign</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_value</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">NDIM</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">assign</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_list</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">NDIM</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">assign</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_list2</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">def</span> <span class="nf">assign</span><span class="p">(</span><span class="n">values</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
                <span class="k">return</span> <span class="n">prefix</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="o">+</span><span class="s1">&#39;()&#39;</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">blanks</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">idx</span><span class="p">,</span> <span class="p">(</span><span class="n">toy</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(</span><span class="si">%s</span><span class="s1">=&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">toy</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">=&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">blanks</span><span class="p">,</span> <span class="n">toy</span><span class="p">)</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">assign</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">79</span><span class="p">))</span>
        <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;)&#39;</span>
        <span class="k">return</span> <span class="s1">&#39;,</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_toy2values</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">dir_</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">toy</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">toy</span><span class="p">,</span> <span class="n">dummy</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">]</span></div>


<div class="viewcode-block" id="KeywordParameter2DType"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.KeywordParameter2DType">[docs]</a><span class="k">class</span> <span class="nc">KeywordParameter2DType</span><span class="p">(</span><span class="nb">type</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Add the construction of `_ROWCOLMAPPING` to :class:`type`.&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">dict_</span><span class="p">):</span>
        <span class="n">rownames</span> <span class="o">=</span> <span class="n">dict_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ROWNAMES&#39;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;ROWNAMES&#39;</span><span class="p">,</span> <span class="p">()))</span>
        <span class="n">colnames</span> <span class="o">=</span> <span class="n">dict_</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;COLNAMES&#39;</span><span class="p">,</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">parents</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;COLNAMES&#39;</span><span class="p">,</span> <span class="p">()))</span>
        <span class="n">rowcolmappings</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">rowname</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rownames</span><span class="p">):</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">jdx</span><span class="p">,</span> <span class="n">colname</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">colnames</span><span class="p">):</span>
                <span class="n">rowcolmappings</span><span class="p">[</span><span class="s1">&#39;_&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">rowname</span><span class="p">,</span> <span class="n">colname</span><span class="p">))]</span> <span class="o">=</span> <span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">jdx</span><span class="p">)</span>
        <span class="n">dict_</span><span class="p">[</span><span class="s1">&#39;_ROWCOLMAPPINGS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">rowcolmappings</span>
        <span class="k">return</span> <span class="nb">type</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">dict_</span><span class="p">)</span></div>


<span class="n">KeywordParameter2DMetaclass</span> <span class="o">=</span> <span class="n">KeywordParameter2DType</span><span class="p">(</span>
    <span class="s1">&#39;KeywordParameter2DMetaclass&#39;</span><span class="p">,</span> <span class="p">(</span><span class="n">MultiParameter</span><span class="p">,),</span> <span class="p">{})</span>


<div class="viewcode-block" id="KeywordParameter2D"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.KeywordParameter2D">[docs]</a><span class="k">class</span> <span class="nc">KeywordParameter2D</span><span class="p">(</span><span class="n">KeywordParameter2DMetaclass</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for 2-dimensional model parameters which values which depend</span>
<span class="sd">    on two factors.</span>

<span class="sd">    When inheriting an actual parameter class from |KeywordParameter2D|</span>
<span class="sd">    one needs to define the class attributes |KeywordParameter2D.ROWNAMES|</span>
<span class="sd">    and |KeywordParameter2D.COLNAMES| (both of type |tuple|).  One usual</span>
<span class="sd">    setting would be that |KeywordParameter2D.ROWNAMES| defines some land</span>
<span class="sd">    use classes and |KeywordParameter2D.COLNAMES| defines seasons, months,</span>
<span class="sd">    or the like.</span>

<span class="sd">    Consider the following example, where the boolean parameter `IsWarm` both</span>
<span class="sd">    depends on the half-year period and the hemisphere:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.parametertools import KeywordParameter2D</span>
<span class="sd">    &gt;&gt;&gt; class IsWarm(KeywordParameter2D):</span>
<span class="sd">    ...     TYPE = bool</span>
<span class="sd">    ...     ROWNAMES = (&#39;north&#39;, &#39;south&#39;)</span>
<span class="sd">    ...     COLNAMES = (&#39;apr2sep&#39;, &#39;oct2mar&#39;)</span>

<span class="sd">    Instantiate the defined parameter class and define its shape:</span>

<span class="sd">    &gt;&gt;&gt; iswarm = IsWarm()</span>
<span class="sd">    &gt;&gt;&gt; iswarm.shape = (2, 2)</span>

<span class="sd">    |KeywordParameter2D| allows to set the values of all rows via</span>
<span class="sd">    keyword arguments:</span>

<span class="sd">    &gt;&gt;&gt; iswarm(north=[True, False],</span>
<span class="sd">    ...        south=[False, True])</span>
<span class="sd">    &gt;&gt;&gt; iswarm</span>
<span class="sd">    iswarm(north=[True, False],</span>
<span class="sd">           south=[False, True])</span>
<span class="sd">    &gt;&gt;&gt; iswarm.values</span>
<span class="sd">    array([[ True, False],</span>
<span class="sd">           [False,  True]], dtype=bool)</span>

<span class="sd">    If a keyword is missing, a |TypeError| is raised:</span>

<span class="sd">    &gt;&gt;&gt; iswarm(north=[True, False])</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: When setting parameter `iswarm` of element `?` via row \</span>
<span class="sd">related keyword arguments, each string defined in `ROWNAMES` must be used \</span>
<span class="sd">as a keyword, but the following keyword is not: `south`.</span>

<span class="sd">    But one can modify single rows via attribute access:</span>

<span class="sd">    &gt;&gt;&gt; iswarm.north = False, False</span>
<span class="sd">    &gt;&gt;&gt; iswarm.north</span>
<span class="sd">    array([False, False], dtype=bool)</span>

<span class="sd">    The same holds true for the columns:</span>

<span class="sd">    &gt;&gt;&gt; iswarm.apr2sep = True, False</span>
<span class="sd">    &gt;&gt;&gt; iswarm.apr2sep</span>
<span class="sd">    array([ True, False], dtype=bool)</span>

<span class="sd">    Even a combined row-column access is supported in the following manner:</span>

<span class="sd">    &gt;&gt;&gt; iswarm.north_apr2sep</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; iswarm.north_apr2sep = False</span>
<span class="sd">    &gt;&gt;&gt; iswarm.north_apr2sep</span>
<span class="sd">    False</span>

<span class="sd">    All three forms of attribute access define augmented exception messages</span>
<span class="sd">    in case anything goes wrong:</span>

<span class="sd">    &gt;&gt;&gt; iswarm.north = True, True, True</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: While trying to assign new values to parameter `iswarm` of \</span>
<span class="sd">element `?` via the row related attribute `north`, the following error \</span>
<span class="sd">occured: cannot copy sequence with size 3 to array axis with dimension 2</span>
<span class="sd">    &gt;&gt;&gt; iswarm.apr2sep = True, True, True</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: While trying to assign new values to parameter `iswarm` of \</span>
<span class="sd">element `?` via the column related attribute `apr2sep`, the following error \</span>
<span class="sd">occured: cannot copy sequence with size 3 to array axis with dimension 2</span>

<span class="sd">    &gt;&gt;&gt; iswarm.shape = (1, 1)</span>
<span class="sd">    &gt;&gt;&gt; iswarm.south_apr2sep = False</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    IndexError: While trying to assign new values to parameter `iswarm` of \</span>
<span class="sd">element `?` via the row and column related attribute `south_apr2sep`, the \</span>
<span class="sd">following error occured: index 1 is out of bounds for axis 0 with size 1</span>
<span class="sd">    &gt;&gt;&gt; iswarm.shape = (2, 2)</span>

<span class="sd">    Of course, one can define the parameter values in the common manner, e.g.:</span>

<span class="sd">    &gt;&gt;&gt; iswarm(True)</span>
<span class="sd">    &gt;&gt;&gt; iswarm</span>
<span class="sd">    iswarm(north=[True, True],</span>
<span class="sd">           south=[True, True])</span>

<span class="sd">    For parameters with many columns, string representations are properly</span>
<span class="sd">    wrapped:</span>

<span class="sd">    &gt;&gt;&gt; iswarm.shape = (2, 10)</span>
<span class="sd">    &gt;&gt;&gt; iswarm</span>
<span class="sd">    iswarm(north=[False, False, False, False, False, False, False, False,</span>
<span class="sd">                  False, False],</span>
<span class="sd">           south=[False, False, False, False, False, False, False, False,</span>
<span class="sd">                  False, False])</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">NDIM</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">ROWNAMES</span> <span class="o">=</span> <span class="p">()</span>
    <span class="n">COLNAMES</span> <span class="o">=</span> <span class="p">()</span>

<div class="viewcode-block" id="KeywordParameter2D.connect"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.KeywordParameter2D.connect">[docs]</a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subpars</span><span class="p">):</span>
        <span class="n">MultiParameter</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subpars</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ROWNAMES</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">COLNAMES</span><span class="p">))</span></div>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">MultiParameter</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ROWNAMES</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">values</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                    <span class="n">miss</span> <span class="o">=</span> <span class="p">[</span><span class="n">key</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROWNAMES</span> <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">]</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;When setting parameter `</span><span class="si">%s</span><span class="s1">` of element `</span><span class="si">%s</span><span class="s1">` via &#39;</span>
                        <span class="s1">&#39;row related keyword arguments, each string &#39;</span>
                        <span class="s1">&#39;defined in `ROWNAMES` must be used as a keyword, &#39;</span>
                        <span class="s1">&#39;but the following keyword</span><span class="si">%s</span><span class="s1"> not: `</span><span class="si">%s</span><span class="s1">`.&#39;</span>
                        <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                           <span class="s1">&#39; is&#39;</span> <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">miss</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;s are&#39;</span><span class="p">,</span>
                           <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">miss</span><span class="p">)))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">values</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commentrepr</span><span class="p">()</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
        <span class="n">blanks</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">*</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ROWNAMES</span><span class="p">):</span>
            <span class="n">subprefix</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">=&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span> <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span>
                         <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">=&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">blanks</span><span class="p">,</span> <span class="n">key</span><span class="p">))</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="p">:],</span>
                                                     <span class="n">subprefix</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROWNAMES</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ROWNAMES</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="p">:]</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                    <span class="s1">&#39;While trying to retrieve values from parameter `</span><span class="si">%s</span><span class="s1">` of &#39;</span>
                    <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">` via the row related attribute `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">COLNAMES</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[:,</span> <span class="bp">self</span><span class="o">.</span><span class="n">COLNAMES</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                    <span class="s1">&#39;While trying to retrieve values from parameter `</span><span class="si">%s</span><span class="s1">` of &#39;</span>
                    <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">` via the columnd related attribute `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ROWCOLMAPPINGS</span><span class="p">:</span>
            <span class="n">idx</span><span class="p">,</span> <span class="n">jdx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ROWCOLMAPPINGS</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">jdx</span><span class="p">]</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                    <span class="s1">&#39;While trying to retrieve values from parameter `</span><span class="si">%s</span><span class="s1">` of &#39;</span>
                    <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">` via the row and column related attribute &#39;</span>
                    <span class="s1">&#39;`</span><span class="si">%s</span><span class="s1">`&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">MultiParameter</span><span class="o">.</span><span class="fm">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ROWNAMES</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">ROWNAMES</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">key</span><span class="p">),</span> <span class="p">:]</span> <span class="o">=</span> <span class="n">values</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                    <span class="s1">&#39;While trying to assign new values to parameter `</span><span class="si">%s</span><span class="s1">` of &#39;</span>
                    <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">` via the row related attribute `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">COLNAMES</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[:,</span> <span class="bp">self</span><span class="o">.</span><span class="n">COLNAMES</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">values</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                    <span class="s1">&#39;While trying to assign new values to parameter `</span><span class="si">%s</span><span class="s1">` of &#39;</span>
                    <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">` via the column related attribute `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                    <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">key</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ROWCOLMAPPINGS</span><span class="p">:</span>
            <span class="n">idx</span><span class="p">,</span> <span class="n">jdx</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_ROWCOLMAPPINGS</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="n">idx</span><span class="p">,</span> <span class="n">jdx</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
            <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                    <span class="s1">&#39;While trying to assign new values to parameter `</span><span class="si">%s</span><span class="s1">` of &#39;</span>
                    <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">` via the row and column related attribute &#39;</span>
                    <span class="s1">&#39;`</span><span class="si">%s</span><span class="s1">`&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">key</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">MultiParameter</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">values</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">objecttools</span><span class="o">.</span><span class="n">dir_</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ROWNAMES</span><span class="p">)</span> <span class="o">+</span>
                <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">COLNAMES</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_ROWCOLMAPPINGS</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span></div>


<div class="viewcode-block" id="LeftRightParameter"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.LeftRightParameter">[docs]</a><span class="k">class</span> <span class="nc">LeftRightParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>
    <span class="n">NDIM</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">MultiParameter</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">NotImplementedError</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;l&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">left</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;When setting the values of parameter `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                                 <span class="s1">&#39;of element `</span><span class="si">%s</span><span class="s1">` via keyword arguments, &#39;</span>
                                 <span class="s1">&#39;either `left` or `l` for the &quot;left&quot; &#39;</span>
                                 <span class="s1">&#39;parameter value must be given, but is not.&#39;</span>
                                 <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">left</span> <span class="o">=</span> <span class="n">left</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;right&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">right</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;When setting the values of parameter `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                                 <span class="s1">&#39;of element `</span><span class="si">%s</span><span class="s1">` via keyword arguments, &#39;</span>
                                 <span class="s1">&#39;either `right` or `r` for the &quot;right&quot; &#39;</span>
                                 <span class="s1">&#39;parameter value must be given, but is not.&#39;</span>
                                 <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">right</span> <span class="o">=</span> <span class="n">right</span>

<div class="viewcode-block" id="LeftRightParameter.connect"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.LeftRightParameter.connect">[docs]</a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subpars</span><span class="p">):</span>
        <span class="n">MultiParameter</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subpars</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="mi">2</span></div>

    <span class="k">def</span> <span class="nf">_getleft</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The &quot;left&quot; value of the actual parameter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_setleft</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="n">left</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getleft</span><span class="p">,</span> <span class="n">_setleft</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_getright</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The &quot;right&quot; value of the actual parameter.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">_setright</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

    <span class="n">right</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_getright</span><span class="p">,</span> <span class="n">_setright</span><span class="p">)</span></div>


<div class="viewcode-block" id="IndexParameter"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.IndexParameter">[docs]</a><span class="k">class</span> <span class="nc">IndexParameter</span><span class="p">(</span><span class="n">MultiParameter</span><span class="p">):</span>

<div class="viewcode-block" id="IndexParameter.setreference"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.IndexParameter.setreference">[docs]</a>    <span class="k">def</span> <span class="nf">setreference</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">indexarray</span><span class="p">):</span>
        <span class="nb">setattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fastaccess</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">indexarray</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="SolverParameter"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SolverParameter">[docs]</a><span class="k">class</span> <span class="nc">SolverParameter</span><span class="p">(</span><span class="n">SingleParameter</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">SingleParameter</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_alternative_initvalue</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">SingleParameter</span><span class="o">.</span><span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">alternative_initvalue</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span>

<div class="viewcode-block" id="SolverParameter.update"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SolverParameter.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alternative_initvalue</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
            <span class="bp">self</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modify_init</span><span class="p">())</span></div>

<div class="viewcode-block" id="SolverParameter.modify_init"><a class="viewcode-back" href="../../../parametertools.html#hydpy.auxs.anntools.SolverParameter.modify_init">[docs]</a>    <span class="k">def</span> <span class="nf">modify_init</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">INIT</span></div>

    <span class="k">def</span> <span class="nf">_get_alternative_initvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_alternative_initvalue</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s1">&#39;No alternative initial value for solver parameter `</span><span class="si">%s</span><span class="s1">` of &#39;</span>
                <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">` has been defined so far.&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_alternative_initvalue</span>

    <span class="k">def</span> <span class="nf">_set_alternative_initvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_alternative_initvalue</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">def</span> <span class="nf">_del_alternative_initvalue</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_alternative_initvalue</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">alternative_initvalue</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_alternative_initvalue</span><span class="p">,</span>
                                     <span class="n">_set_alternative_initvalue</span><span class="p">,</span>
                                     <span class="n">_del_alternative_initvalue</span><span class="p">)</span></div>


<span class="n">autodoctools</span><span class="o">.</span><span class="n">autodoc_module</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../framework.html">Framework Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modelcollection.html">Model Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development.html">Development</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydPy 2.1-dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Christoph Tyralla.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>