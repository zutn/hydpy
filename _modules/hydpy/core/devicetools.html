
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>hydpy.core.devicetools &#8212; HydPy 2.1-dev documentation</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydPy 2.1-dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">Module code</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for hydpy.core.devicetools</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;This modules implements features related to two types of `devices`,</span>
<span class="sd">called `nodes` and `elements` which are the most fundamental means to</span>
<span class="sd">structure HydPy projects.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># import...</span>
<span class="c1"># ...from standard library</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">struct</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">import</span> <span class="nn">weakref</span>
<span class="c1"># ...from site-packages</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">from</span> <span class="nn">hydpy</span> <span class="k">import</span> <span class="n">pyplot</span>
<span class="c1"># ...from HydPy</span>
<span class="kn">from</span> <span class="nn">hydpy</span> <span class="k">import</span> <span class="n">pub</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">abctools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">autodoctools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">connectiontools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">objecttools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">printtools</span>
<span class="kn">from</span> <span class="nn">hydpy.core</span> <span class="k">import</span> <span class="n">sequencetools</span>
<span class="kn">from</span> <span class="nn">hydpy.cythons</span> <span class="k">import</span> <span class="n">pointerutils</span>


<div class="viewcode-block" id="Keywords"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Keywords">[docs]</a><span class="k">class</span> <span class="nc">Keywords</span><span class="p">(</span><span class="nb">set</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set of keyword arguments used to describe and search for element and</span>
<span class="sd">    node objects.</span>

<span class="sd">    &gt;&gt;&gt; from hydpy.core.devicetools import Keywords</span>
<span class="sd">    &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">    &gt;&gt;&gt; dummies.keywords = Keywords([&#39;first_keyword&#39;, &#39;second_keyword&#39;,</span>
<span class="sd">    ...                              &#39;keyword_3&#39;, &#39;keyword_4&#39;,</span>
<span class="sd">    ...                              &#39;keyboard&#39;])</span>
<span class="sd">    &gt;&gt;&gt; dummies.keywords</span>
<span class="sd">    Keywords([&quot;first_keyword&quot;, &quot;keyboard&quot;, &quot;keyword_3&quot;, &quot;keyword_4&quot;,</span>
<span class="sd">              &quot;second_keyword&quot;])</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keywords</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="nb">set</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span>

<div class="viewcode-block" id="Keywords.startswith"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Keywords.startswith">[docs]</a>    <span class="k">def</span> <span class="nf">startswith</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all keywords starting with the given string.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; dummies.keywords.startswith(&#39;keyword&#39;)</span>
<span class="sd">        [&#39;keyword_3&#39;, &#39;keyword_4&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">keyword</span> <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">keyword</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="Keywords.endswith"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Keywords.endswith">[docs]</a>    <span class="k">def</span> <span class="nf">endswith</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all keywords ending with the given string.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; dummies.keywords.endswith(&#39;keyword&#39;)</span>
<span class="sd">        [&#39;first_keyword&#39;, &#39;second_keyword&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">keyword</span> <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">keyword</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">name</span><span class="p">))</span></div>

<div class="viewcode-block" id="Keywords.contains"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Keywords.contains">[docs]</a>    <span class="k">def</span> <span class="nf">contains</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Returns a list of all keywords containing the given string.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; dummies.keywords.contains(&#39;keyword&#39;)</span>
<span class="sd">        [&#39;first_keyword&#39;, &#39;keyword_3&#39;, &#39;keyword_4&#39;, &#39;second_keyword&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">keyword</span> <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">keyword</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_check_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
                <span class="n">objecttools</span><span class="o">.</span><span class="n">valid_variable_identifier</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                <span class="s1">&#39;While trying to add the keyword `</span><span class="si">%s</span><span class="s1">` to device `</span><span class="si">%s</span><span class="s1">`&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">devicename</span><span class="p">(</span><span class="bp">self</span><span class="p">)))</span>

<div class="viewcode-block" id="Keywords.update"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Keywords.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Before updating, names are checked to be valid variable identifiers.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; keywords = dummies.keywords</span>
<span class="sd">        &gt;&gt;&gt; keywords.update([&#39;test_1&#39;, &#39;test 2&#39;])</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        ValueError: While trying to add the keyword `test 2` to device `?`, \</span>
<span class="sd">the following error occured: The given name string `test 2` does not define a \</span>
<span class="sd">valid variable identifier.  ...</span>

<span class="sd">        Note that the first string (`test_1`) is not added, as the second</span>
<span class="sd">        one (`test 2`) is invalid:</span>

<span class="sd">        &gt;&gt;&gt; keywords</span>
<span class="sd">        Keywords([&quot;first_keyword&quot;, &quot;keyboard&quot;, &quot;keyword_3&quot;, &quot;keyword_4&quot;,</span>
<span class="sd">                  &quot;second_keyword&quot;])</span>

<span class="sd">        If the seconds string is corrected, everything works fine:</span>

<span class="sd">        &gt;&gt;&gt; keywords.update([&#39;test_1&#39;, &#39;test_2&#39;])</span>
<span class="sd">        &gt;&gt;&gt; keywords</span>
<span class="sd">        Keywords([&quot;first_keyword&quot;, &quot;keyboard&quot;, &quot;keyword_3&quot;, &quot;keyword_4&quot;,</span>
<span class="sd">                  &quot;second_keyword&quot;, &quot;test_1&quot;, &quot;test_2&quot;])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keywords</span><span class="p">(</span><span class="n">names</span><span class="p">)</span>
        <span class="nb">set</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="p">)</span></div>

<div class="viewcode-block" id="Keywords.add"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Keywords.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Before adding a new name, it is checked to be valid variable identifiers.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; keywords = dummies.keywords</span>
<span class="sd">        &gt;&gt;&gt; keywords.add(&#39;1_test&#39;)</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        ValueError: While trying to add the keyword `1_test` to device `?`, \</span>
<span class="sd">the following error occured: The given name string `1_test` does not define a \</span>
<span class="sd">valid variable identifier.  ...</span>

<span class="sd">        &gt;&gt;&gt; keywords</span>
<span class="sd">        Keywords([&quot;first_keyword&quot;, &quot;keyboard&quot;, &quot;keyword_3&quot;, &quot;keyword_4&quot;,</span>
<span class="sd">                  &quot;second_keyword&quot;])</span>

<span class="sd">        If the string is corrected, everything works fine:</span>

<span class="sd">        &gt;&gt;&gt; keywords.add(&#39;one_test&#39;)</span>
<span class="sd">        &gt;&gt;&gt; keywords</span>
<span class="sd">        Keywords([&quot;first_keyword&quot;, &quot;keyboard&quot;, &quot;keyword_3&quot;, &quot;keyword_4&quot;,</span>
<span class="sd">                  &quot;one_test&quot;, &quot;second_keyword&quot;])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_keywords</span><span class="p">([</span><span class="n">name</span><span class="p">])</span>
        <span class="nb">set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">repr_</span><span class="o">.</span><span class="n">preserve_strings</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_list</span><span class="p">(</span>
                <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="s1">&#39;Keywords(&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>

    <span class="fm">__dir__</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">dir_</span></div>


<div class="viewcode-block" id="Device"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Device">[docs]</a><span class="k">class</span> <span class="nc">Device</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for class |Element| and class |Node|.</span>

<span class="sd">    For framework programmers it is important to know, that all created</span>
<span class="sd">    devices are registered.  Besides some other simplifications for</span>
<span class="sd">    framework users, this prevents from defining multiple devices with</span>
<span class="sd">    the same name (which is not allowed, at the names are supposed to</span>
<span class="sd">    be valid object identifiers).</span>

<span class="sd">    To show how the registry works, we first start with a clear registry:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy import Node</span>
<span class="sd">    &gt;&gt;&gt; Node.clear_registry()</span>
<span class="sd">    &gt;&gt;&gt; sorted(Node.registered_names())</span>
<span class="sd">    []</span>

<span class="sd">    Now we initialize two nodes:</span>

<span class="sd">    &gt;&gt;&gt; node1 = Node(&#39;n1&#39;)</span>
<span class="sd">    &gt;&gt;&gt; node2 = Node(&#39;n2&#39;)</span>

<span class="sd">    Each time we pass the same names to the constructor of class |Node|,</span>
<span class="sd">    the same object is returned:</span>

<span class="sd">    &gt;&gt;&gt; node1 is Node(&#39;n1&#39;)</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; node1 is Node(&#39;n2&#39;)</span>
<span class="sd">    False</span>

<span class="sd">    You can access all registed nodes via the following class method:</span>

<span class="sd">    &gt;&gt;&gt; Node.registered_nodes()</span>
<span class="sd">    Nodes(&quot;n1&quot;, &quot;n2&quot;)</span>

<span class="sd">    The respective names are directly available via:</span>

<span class="sd">    &gt;&gt;&gt; sorted(Node.registered_names())</span>
<span class="sd">    [&#39;n1&#39;, &#39;n2&#39;]</span>

<span class="sd">    It is not recommended under usual circumstances, but you are allowed</span>
<span class="sd">    to clear the registry:</span>

<span class="sd">    &gt;&gt;&gt; Node.clear_registry()</span>
<span class="sd">    &gt;&gt;&gt; Node.registered_nodes()</span>
<span class="sd">    Nodes()</span>

<span class="sd">    But now there is the danger of creating two differnt nodes with the</span>
<span class="sd">    same name, which is very likely to result in strange bugs:</span>

<span class="sd">    &gt;&gt;&gt; new_node1 = Node(&#39;n1&#39;)</span>
<span class="sd">    &gt;&gt;&gt; new_node1 is node1</span>
<span class="sd">    False</span>
<span class="sd">    &gt;&gt;&gt; new_node1 == node1</span>
<span class="sd">    True</span>

<span class="sd">    The examples above also work for class |Element|, except that method</span>
<span class="sd">    |Node.registered_nodes| must be exchanged with method</span>
<span class="sd">    |Element.registered_elements|, of course:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy import Element</span>
<span class="sd">    &gt;&gt;&gt; Element.clear_registry()</span>
<span class="sd">    &gt;&gt;&gt; Element(&#39;e1&#39;).registered_elements()</span>
<span class="sd">    Elements(&quot;e1&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_registry</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">_selection</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">_get_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Name of the actual device (node or element).</span>

<span class="sd">        Names are the identifiers of |Node| and |Element| objects.</span>
<span class="sd">        So define them carefully:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import Node</span>
<span class="sd">        &gt;&gt;&gt; node1, node2 = Node(&#39;n1&#39;), Node(&#39;n2&#39;)</span>
<span class="sd">        &gt;&gt;&gt; node1 is Node(&#39;n1&#39;)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; node1 is Node(&#39;n2&#39;)</span>
<span class="sd">        False</span>

<span class="sd">        Note that each name name must be a valid variable identifier (see</span>
<span class="sd">        function |valid_variable_identifier|), to allow for attribute access:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import Nodes</span>
<span class="sd">        &gt;&gt;&gt; nodes = Nodes(node1, &#39;n2&#39;)</span>
<span class="sd">        &gt;&gt;&gt; nodes.n1</span>
<span class="sd">        Node(&quot;n1&quot;, variable=&quot;Q&quot;)</span>

<span class="sd">        Invalid variable identifiers result errors like the following:</span>

<span class="sd">        &gt;&gt;&gt; node3 = Node(&#39;n 3&#39;)</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        ValueError: While trying to initialize a `Node` object with value \</span>
<span class="sd">`n 3` of type `str`, the following error occured: The given name string `n 3` \</span>
<span class="sd">does not define a valid variable identifier.  ...</span>

<span class="sd">        When you change the name of a |Node| and |Element| object (only</span>
<span class="sd">        do this for a good reason), the corresponding key of all related</span>
<span class="sd">        |Nodes| and |Elements| objects (as well as of the internal registry)</span>
<span class="sd">        changes automatically:</span>

<span class="sd">        &gt;&gt;&gt; node1.name = &#39;n1a&#39;</span>
<span class="sd">        &gt;&gt;&gt; nodes</span>
<span class="sd">        Nodes(&quot;n1a&quot;, &quot;n2&quot;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_name</span>

    <span class="k">def</span> <span class="nf">_set_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_check_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">_handlers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">_handlers</span><span class="p">:</span>
            <span class="n">handler</span><span class="o">.</span><span class="n">remove_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="k">for</span> <span class="n">handler</span> <span class="ow">in</span> <span class="n">_handlers</span><span class="p">:</span>
            <span class="n">handler</span><span class="o">.</span><span class="n">add_device</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="n">name</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_name</span><span class="p">,</span> <span class="n">_set_name</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_check_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">objecttools</span><span class="o">.</span><span class="n">valid_variable_identifier</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                <span class="s1">&#39;While trying to initialize a `</span><span class="si">%s</span><span class="s1">` object with value `</span><span class="si">%s</span><span class="s1">` &#39;</span>
                <span class="s1">&#39;of type `</span><span class="si">%s</span><span class="s1">`&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">name</span><span class="p">,</span>
                                  <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="n">name</span><span class="p">)))</span>

    <span class="k">def</span> <span class="nf">_get_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Keywords describing this device.</span>

<span class="sd">        The keywords are contained within a |Keywords| object:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import Node</span>
<span class="sd">        &gt;&gt;&gt; node = Node(&#39;n&#39;)</span>
<span class="sd">        &gt;&gt;&gt; node.keywords</span>
<span class="sd">        Keywords([])</span>

<span class="sd">        You are allowed to add then individually...</span>

<span class="sd">        &gt;&gt;&gt; node.keywords = &#39;word1&#39;</span>

<span class="sd">        ... or within iterables:</span>

<span class="sd">        &gt;&gt;&gt; node.keywords = (&#39;word2&#39;, &#39;word3&#39;)</span>
<span class="sd">        &gt;&gt;&gt; node.keywords</span>
<span class="sd">        Keywords([&quot;word1&quot;, &quot;word2&quot;, &quot;word3&quot;])</span>

<span class="sd">        You can delete all keywords at once via:</span>

<span class="sd">        &gt;&gt;&gt; del node.keywords</span>
<span class="sd">        &gt;&gt;&gt; node.keywords</span>
<span class="sd">        Keywords([])</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_keywords</span>

    <span class="k">def</span> <span class="nf">_set_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">keywords</span><span class="p">):</span>
        <span class="n">keywords</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">objecttools</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span><span class="n">keywords</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,),</span> <span class="kc">True</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">keywords</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_del_keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_keywords</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

    <span class="n">keywords</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_keywords</span><span class="p">,</span> <span class="n">_set_keywords</span><span class="p">,</span> <span class="n">_del_keywords</span><span class="p">)</span>

<div class="viewcode-block" id="Device.clear_registry"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Device.clear_registry">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">clear_registry</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Clear the registry from all initialized devices.&quot;&quot;&quot;</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_selection</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span></div>

<div class="viewcode-block" id="Device.registered_names"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Device.registered_names">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">registered_names</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all names of |Device| objects initialized so far.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span></div>

<div class="viewcode-block" id="Device.add_handler"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Device.add_handler">[docs]</a>    <span class="k">def</span> <span class="nf">add_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add the given handler (either an |Elements| or</span>
<span class="sd">        :class`Nodes` object) to the set of handlers stored internally.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span></div>

<div class="viewcode-block" id="Device.remove_handler"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Device.remove_handler">[docs]</a>    <span class="k">def</span> <span class="nf">remove_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">handler</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove the given handler (either an |Elements| or</span>
<span class="sd">        :class`Nodes` object) from the set of handlers stored internally.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">handler</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">connections</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_all_connections</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">connections</span>

    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">&lt;</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">&lt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">&gt;=</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="fm">__dir__</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">dir_</span></div>


<div class="viewcode-block" id="Node"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node">[docs]</a><span class="k">class</span> <span class="nc">Node</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Handles the data flow between |Element| objects.</span>

<span class="sd">    When initializing |Node| objects, values for the optional `variable`</span>
<span class="sd">    and `keywords` can be passed, which default to `Q` and &quot;empty:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy import Node</span>
<span class="sd">    &gt;&gt;&gt; node = Node(&#39;test&#39;)</span>
<span class="sd">    &gt;&gt;&gt; node.variable</span>
<span class="sd">    &#39;Q&#39;</span>
<span class="sd">    &gt;&gt;&gt; node.keywords</span>
<span class="sd">    Keywords([])</span>

<span class="sd">    You are allowed to add further keywords by successive constructor calls:</span>

<span class="sd">    &gt;&gt;&gt; node = Node(&#39;test&#39;, keywords=&#39;word1&#39;)</span>
<span class="sd">    &gt;&gt;&gt; Node(&#39;test&#39;, keywords=(&#39;word2&#39;, &#39;word3&#39;))</span>
<span class="sd">    Node(&quot;test&quot;, variable=&quot;Q&quot;,</span>
<span class="sd">         keywords=[&quot;word1&quot;, &quot;word2&quot;, &quot;word3&quot;])</span>

<span class="sd">    But you are not allowed to change the variable a node is supposed to</span>
<span class="sd">    handle (would be to error-prone):</span>

<span class="sd">    &gt;&gt;&gt; Node(&#39;test&#39;, variable=&#39;W&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: The variable to be represented by a `Node instance cannot \</span>
<span class="sd">be changed.  The variable of node `test` is `Q` instead of `W` or `None`.  \</span>
<span class="sd">Keep in mind, that `name` is the unique identifier of node objects.</span>

<span class="sd">    If you really want to change a variable without to restart your Python</span>
<span class="sd">    process, you have to delete the node from the registry first (again,</span>
<span class="sd">    very error-prone unless you are absolutely sure you can delete all</span>
<span class="sd">    other relevant references to the node object):</span>

<span class="sd">    &gt;&gt;&gt; del node._registry[&#39;test&#39;]</span>
<span class="sd">    &gt;&gt;&gt; Node(&#39;test&#39;, variable=&#39;W&#39;)</span>
<span class="sd">    Node(&quot;test&quot;, variable=&quot;W&quot;)</span>


<span class="sd">    To fully understand the last example, read the technical remarks</span>
<span class="sd">    regarding the registry of |Device| objects explained above.</span>
<span class="sd">    On top of this persistent registry, there is also a temporal one,</span>
<span class="sd">    which helps to identify when certain nodes where created</span>
<span class="sd">    (e.g. during the execution of a certain network file).</span>

<span class="sd">    To show how this works, we again start with a clear registry:</span>

<span class="sd">    &gt;&gt;&gt; Node.clear_registry()</span>

<span class="sd">    Firstly, create two nodes:</span>

<span class="sd">    &gt;&gt;&gt; node1 = Node(&#39;n1&#39;)</span>
<span class="sd">    &gt;&gt;&gt; node2 = Node(&#39;n2&#39;)</span>

<span class="sd">    Now &quot;gather&quot; these two nodes:</span>

<span class="sd">    &gt;&gt;&gt; Node.gather_new_nodes()</span>
<span class="sd">    Nodes(&quot;n1&quot;, &quot;n2&quot;)</span>

<span class="sd">    This automatically removes the gathered nodes from the temporal registry.</span>
<span class="sd">    This can be shown by simply calling the method again:</span>

<span class="sd">    &gt;&gt;&gt; Node.gather_new_nodes()</span>
<span class="sd">    Nodes()</span>

<span class="sd">    Now create a new node (n3) and call the constructor of an already existing</span>
<span class="sd">    node again:</span>

<span class="sd">    &gt;&gt;&gt; node3 = Node(&#39;n3&#39;)</span>
<span class="sd">    &gt;&gt;&gt; node1 = Node(&#39;n1&#39;)</span>

<span class="sd">    Calling method `gather_new_nodes` again shows that an node is regarded</span>
<span class="sd">    as &quot;new&quot;, if its constructor has been called:</span>

<span class="sd">    &gt;&gt;&gt; Node.gather_new_nodes()</span>
<span class="sd">    Nodes(&quot;n1&quot;, &quot;n3&quot;)</span>

<span class="sd">    This mechanism allows for redefining the same node in different network</span>
<span class="sd">    files while keeping track of all files where it has been defined.</span>

<span class="sd">    The following example is just supposed to clarify that the permanent</span>
<span class="sd">    registry has not been altered by calling `gather_new_nodes`:</span>

<span class="sd">    &gt;&gt;&gt; Node.registered_nodes()</span>
<span class="sd">    Nodes(&quot;n1&quot;, &quot;n2&quot;, &quot;n3&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">_registry</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">_selection</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">_predefinedvariable</span> <span class="o">=</span> <span class="s1">&#39;Q&#39;</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">keywords</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an already existing |Node| instance or, if such</span>
<span class="sd">        an instance does not exist yet, return a newly created one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span>
            <span class="bp">self</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">Node</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="k">if</span> <span class="n">variable</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_variable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_predefinedvariable</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_variable</span> <span class="o">=</span> <span class="n">variable</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_keywords</span> <span class="o">=</span> <span class="n">Keywords</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_keywords</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entries</span> <span class="o">=</span> <span class="n">connectiontools</span><span class="o">.</span><span class="n">Connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;entries&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exits</span> <span class="o">=</span> <span class="n">connectiontools</span><span class="o">.</span><span class="n">Connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;exits&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_all_connections</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">exits</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span> <span class="o">=</span> <span class="n">sequencetools</span><span class="o">.</span><span class="n">NodeSequences</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">deploymode</span> <span class="o">=</span> <span class="s1">&#39;newsim&#39;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_blackhole</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakSet</span><span class="p">()</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_selection</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">variable</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">keywords</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">variable</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">variable</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;The variable to be represented by a `Node instance cannot be &#39;</span>
                <span class="s1">&#39;changed.  The variable of node `</span><span class="si">%s</span><span class="s1">` is `</span><span class="si">%s</span><span class="s1">` instead of `</span><span class="si">%s</span><span class="s1">` &#39;</span>
                <span class="s1">&#39;or `None`.  Keep in mind, that `name` is the unique &#39;</span>
                <span class="s1">&#39;identifier of node objects.&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable</span><span class="p">,</span> <span class="n">variable</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span> <span class="o">=</span> <span class="n">keywords</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">variable</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;The variable handled by the respective node instance, e.g. `Q`.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_variable</span>

<div class="viewcode-block" id="Node.registered_nodes"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.registered_nodes">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">registered_nodes</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all |Node| objects initialized so far.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Nodes</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>

<div class="viewcode-block" id="Node.gather_new_nodes"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.gather_new_nodes">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">gather_new_nodes</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gather all `new` |Node| objects. |Node| objects</span>
<span class="sd">        are deemed to be new if they have been created after the last usage</span>
<span class="sd">        of this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">nodes</span> <span class="o">=</span> <span class="n">Nodes</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_selection</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_selection</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">nodes</span></div>

    <span class="k">def</span> <span class="nf">_get_deploymode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Defines the kind of information a node deploys.</span>

<span class="sd">        The following modes are supported:</span>

<span class="sd">          * newsim: Deploy the simulated values calculated just recently.</span>
<span class="sd">            This is the default mode, where a node receives e.g. a discharge</span>
<span class="sd">            value from a upstream element and passes it to the downstream</span>
<span class="sd">            element directly.</span>
<span class="sd">          * obs: Deploy observed values instead of simulated values.  The</span>
<span class="sd">            node still receives the simulated values from its upstream</span>
<span class="sd">            element(s).  But it deploys values to its downstream nodes which</span>
<span class="sd">            are defined externally.  Usually, these values are observations</span>
<span class="sd">            made available within an Sequence file. See module</span>
<span class="sd">            |sequencetools| for further information on file specifications.</span>
<span class="sd">          * oldsim: Simular to mode `obs`.  But it is usually applied when</span>
<span class="sd">            a node is supposed to deploy simulated values which have been</span>
<span class="sd">            calculated in a previous simulation run and stored in a sequence</span>
<span class="sd">            file.</span>

<span class="sd">        The technical difference between modes `obs` and `oldsim` is, that</span>
<span class="sd">        the external values are either handled by the `obs` or the `sim`</span>
<span class="sd">        sequence object.  Hence, if you select the `oldsim` mode, the</span>
<span class="sd">        values of the upstream elements calculated within the current</span>
<span class="sd">        simulation are not available (e.g. for parameter calibration)</span>
<span class="sd">        after the simulation is finished.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_deploymode</span>

    <span class="k">def</span> <span class="nf">_set_deploymode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;newsim&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">use_ext</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;obs&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">use_ext</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">obs</span><span class="o">.</span><span class="n">use_ext</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;oldsim&#39;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">use_ext</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_blackhole</span> <span class="o">=</span> <span class="n">pointerutils</span><span class="o">.</span><span class="n">Double</span><span class="p">(</span><span class="mf">0.</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;When trying to set the routing mode of node </span><span class="si">%s</span><span class="s1">, the value &#39;</span>
                <span class="s1">&#39;`</span><span class="si">%s</span><span class="s1">` was given, but only the following values are allowed: &#39;</span>
                <span class="s1">&#39;`newsim`, `obs` and `oldsim`.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_deploymode</span> <span class="o">=</span> <span class="n">value</span>

    <span class="n">deploymode</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_get_deploymode</span><span class="p">,</span> <span class="n">_set_deploymode</span><span class="p">)</span>

<div class="viewcode-block" id="Node.get_double"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.get_double">[docs]</a>    <span class="k">def</span> <span class="nf">get_double</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">group</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the |Double| object appropriate for the given group and</span>
<span class="sd">        the predefined deploy mode.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import Node</span>
<span class="sd">        &gt;&gt;&gt; node = Node(&#39;node1&#39;)</span>
<span class="sd">        &gt;&gt;&gt; node.sequences.sim = 1.0</span>
<span class="sd">        &gt;&gt;&gt; node.sequences.obs = 2.0</span>
<span class="sd">        &gt;&gt;&gt; def test(deploymode):</span>
<span class="sd">        ...     node.deploymode = deploymode</span>
<span class="sd">        ...     for group in (&#39;inlets&#39;, &#39;receivers&#39;, &#39;outlets&#39;, &#39;senders&#39;):</span>
<span class="sd">        ...         print(node.get_double(group), end=&#39;&#39;)</span>
<span class="sd">        ...         if group != &#39;senders&#39;:</span>
<span class="sd">        ...             print(end=&#39; &#39;)</span>
<span class="sd">        &gt;&gt;&gt; test(&#39;newsim&#39;)</span>
<span class="sd">        1.0 1.0 1.0 1.0</span>
<span class="sd">        &gt;&gt;&gt; test(&#39;obs&#39;)</span>
<span class="sd">        2.0 2.0 1.0 1.0</span>
<span class="sd">        &gt;&gt;&gt; test(&#39;oldsim&#39;)</span>
<span class="sd">        1.0 1.0 0.0 0.0</span>
<span class="sd">        &gt;&gt;&gt; node.get_double(&#39;test&#39;)</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        ValueError: Function `get_double` of class `Node` does not support \</span>
<span class="sd">the given group name `test`.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">group</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;inlets&#39;</span><span class="p">,</span> <span class="s1">&#39;receivers&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_double_via_exits</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">group</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;outlets&#39;</span><span class="p">,</span> <span class="s1">&#39;senders&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_double_via_entries</span><span class="p">()</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">&#39;Function `get_double` of class `Node` does not &#39;</span>
            <span class="s1">&#39;support the given group name `</span><span class="si">%s</span><span class="s1">`.&#39;</span> <span class="o">%</span> <span class="n">group</span><span class="p">)</span></div>

<div class="viewcode-block" id="Node.get_double_via_exits"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.get_double_via_exits">[docs]</a>    <span class="k">def</span> <span class="nf">get_double_via_exits</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the |Double| object that is supposed to deploy its value</span>
<span class="sd">        to the downstream elements.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deploymode</span> <span class="o">!=</span> <span class="s1">&#39;obs&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">fastaccess</span><span class="o">.</span><span class="n">sim</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">fastaccess</span><span class="o">.</span><span class="n">obs</span></div>

<div class="viewcode-block" id="Node.get_double_via_entries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.get_double_via_entries">[docs]</a>    <span class="k">def</span> <span class="nf">get_double_via_entries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return the |Double| object that is supposed to receive the</span>
<span class="sd">        value(s) of the upstream elements.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">deploymode</span> <span class="o">!=</span> <span class="s1">&#39;oldsim&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">fastaccess</span><span class="o">.</span><span class="n">sim</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_blackhole</span></div>

<div class="viewcode-block" id="Node.reset"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.reset">[docs]</a>    <span class="k">def</span> <span class="nf">reset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Reset the actual value of the simulation sequence to zero.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">fastaccess</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mf">0.</span></div>

<div class="viewcode-block" id="Node.open_files"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.open_files">[docs]</a>    <span class="k">def</span> <span class="nf">open_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Sequences.open_files| of the |Sequences| object</span>
<span class="sd">        handled (indirectly) by the actual |Node| object.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">open_files</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="Node.close_files"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.close_files">[docs]</a>    <span class="k">def</span> <span class="nf">close_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Sequences.close_files| of the |Sequences| object</span>
<span class="sd">        handled (indirectly) by the actual |Node| object.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">close_files</span><span class="p">()</span></div>

    <span class="k">def</span> <span class="nf">_load_data_sim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load the next sim sequence value (of the given index).</span>

<span class="sd">        Used during simulations in Python mode only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fastaccess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">fastaccess</span>
        <span class="k">if</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_sim_ramflag</span><span class="p">:</span>
            <span class="n">fastaccess</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_sim_array</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_sim_diskflag</span><span class="p">:</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_sim_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
            <span class="n">fastaccess</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_save_data_sim</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save the last sim sequence value (of the given index).</span>

<span class="sd">        Used during simulations in Python mode only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fastaccess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">fastaccess</span>
        <span class="k">if</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_sim_ramflag</span><span class="p">:</span>
            <span class="n">fastaccess</span><span class="o">.</span><span class="n">_sim_array</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span> <span class="o">=</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_sim_diskflag</span><span class="p">:</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">fastaccess</span><span class="o">.</span><span class="n">_sim_file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_load_data_obs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load the next obs sequence value (of the given index).</span>

<span class="sd">        Used during simulations in Python mode only.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">fastaccess</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">fastaccess</span>
        <span class="k">if</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_obs_ramflag</span><span class="p">:</span>
            <span class="n">fastaccess</span><span class="o">.</span><span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_obs_array</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_obs_diskflag</span><span class="p">:</span>
            <span class="n">raw</span> <span class="o">=</span> <span class="n">fastaccess</span><span class="o">.</span><span class="n">_obs_file</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
            <span class="n">fastaccess</span><span class="o">.</span><span class="n">obs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">struct</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="n">raw</span><span class="p">)</span>

<div class="viewcode-block" id="Node.prepare_allseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.prepare_allseries">[docs]</a>    <span class="k">def</span> <span class="nf">prepare_allseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prepare the series objects of both the `sim` and the `obs` sequence.</span>

<span class="sd">        Call this method before a simulation run, if you need access to the</span>
<span class="sd">        whole time series of the simulated and the observed series after the</span>
<span class="sd">        simulation run is finished.</span>

<span class="sd">        By default, the series are stored in RAM, which is the faster</span>
<span class="sd">        option.  If your RAM is limited, pass the `False` for function</span>
<span class="sd">        argument `ramflag` to store the series on disk.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepare_simseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepare_obsseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Node.prepare_simseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.prepare_simseries">[docs]</a>    <span class="k">def</span> <span class="nf">prepare_simseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prepare the series object of the `sim` sequence.</span>

<span class="sd">        See method |Node.prepare_allseries| for further information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_nodeseries</span><span class="p">(</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span> <span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Node.prepare_obsseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.prepare_obsseries">[docs]</a>    <span class="k">def</span> <span class="nf">prepare_obsseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prepare the series object of the `obs` sequence.</span>

<span class="sd">        See method |Node.prepare_allseries| for further information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_nodeseries</span><span class="p">(</span><span class="s1">&#39;obs&#39;</span><span class="p">,</span> <span class="n">ramflag</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_prepare_nodeseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqname</span><span class="p">,</span> <span class="n">ramflag</span><span class="p">):</span>
        <span class="n">seq</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="p">,</span> <span class="n">seqname</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ramflag</span><span class="p">:</span>
            <span class="n">seq</span><span class="o">.</span><span class="n">activate_ram</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">seq</span><span class="o">.</span><span class="n">activate_disk</span><span class="p">()</span>

<div class="viewcode-block" id="Node.plot_allseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.plot_allseries">[docs]</a>    <span class="k">def</span> <span class="nf">plot_allseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plot the series of both the `sim` and (if available) the `obs`</span>
<span class="sd">        sequence.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">seq</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">isinteractive</span><span class="p">():</span>
                <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">seq</span><span class="o">.</span><span class="n">name</span><span class="p">))</span>
            <span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">seq</span><span class="o">.</span><span class="n">series</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">pyplot</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
        <span class="n">variable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable</span>
        <span class="k">if</span> <span class="n">variable</span> <span class="o">==</span> <span class="s1">&#39;Q&#39;</span><span class="p">:</span>
            <span class="n">variable</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;Q [m/s]&#39;</span>
        <span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">isinteractive</span><span class="p">():</span>
            <span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span></div>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_calc_idxs</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
        <span class="k">return</span> <span class="o">~</span><span class="n">numpy</span><span class="o">.</span><span class="n">isnan</span><span class="p">(</span><span class="n">values</span><span class="p">)</span> <span class="o">*</span> <span class="o">~</span><span class="n">numpy</span><span class="o">.</span><span class="n">isinf</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

<div class="viewcode-block" id="Node.violinplot"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.violinplot">[docs]</a>    <span class="k">def</span> <span class="nf">violinplot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">logscale</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">old_settings</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">seterr</span><span class="p">(</span><span class="n">divide</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">sim</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">sim</span>
            <span class="n">obs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">obs</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">sim</span><span class="o">.</span><span class="n">memoryflag</span> <span class="ow">or</span> <span class="n">obs</span><span class="o">.</span><span class="n">memoryflag</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s1">&#39;neither sim nor obs&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sim</span><span class="o">.</span><span class="n">memoryflag</span><span class="p">:</span>
                <span class="n">sim_values</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">series</span>
                <span class="k">if</span> <span class="n">logscale</span><span class="p">:</span>
                    <span class="n">sim_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">sim_values</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">obs</span><span class="o">.</span><span class="n">memoryflag</span><span class="p">:</span>
                <span class="n">obs_values</span> <span class="o">=</span> <span class="n">obs</span><span class="o">.</span><span class="n">series</span>
                <span class="k">if</span> <span class="n">logscale</span><span class="p">:</span>
                    <span class="n">obs_values</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">obs_values</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">sim</span><span class="o">.</span><span class="n">memoryflag</span> <span class="ow">and</span> <span class="n">obs</span><span class="o">.</span><span class="n">memoryflag</span><span class="p">:</span>
                <span class="n">idxs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_idxs</span><span class="p">(</span><span class="n">sim_values</span><span class="p">)</span><span class="o">*</span><span class="bp">self</span><span class="o">.</span><span class="n">_calc_idxs</span><span class="p">(</span><span class="n">obs_values</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="p">(</span><span class="n">sim_values</span><span class="p">[</span><span class="n">idxs</span><span class="p">],</span> <span class="n">obs_values</span><span class="p">[</span><span class="n">idxs</span><span class="p">])</span>
                <span class="n">pyplot</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span> <span class="s1">&#39;obs&#39;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="n">sim</span><span class="o">.</span><span class="n">memoryflag</span><span class="p">:</span>
                <span class="n">idxs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_idxs</span><span class="p">(</span><span class="n">sim_values</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">sim_values</span><span class="p">[</span><span class="n">idxs</span><span class="p">]</span>
                <span class="n">pyplot</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;sim&#39;</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">idxs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_calc_idxs</span><span class="p">(</span><span class="n">obs_values</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">obs_values</span><span class="p">[</span><span class="n">idxs</span><span class="p">]</span>
                <span class="n">pyplot</span><span class="o">.</span><span class="n">xticks</span><span class="p">([</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;obs&#39;</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">logscale</span><span class="p">:</span>
                <span class="n">points</span> <span class="o">=</span> <span class="mi">100</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">points</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">idxs</span><span class="p">)</span><span class="o">/</span><span class="mi">10</span><span class="p">),</span> <span class="mi">100</span><span class="p">),</span> <span class="mi">1000</span><span class="p">)</span>
            <span class="n">pyplot</span><span class="o">.</span><span class="n">violinplot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">showmeans</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widths</span><span class="o">=</span><span class="mf">0.8</span><span class="p">,</span> <span class="n">points</span><span class="o">=</span><span class="n">points</span><span class="p">)</span>
            <span class="n">pyplot</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">logscale</span><span class="p">:</span>
                <span class="n">ticks</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">yticks</span><span class="p">()</span>
                <span class="n">pyplot</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="n">ticks</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">%.1e</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="mi">10</span><span class="o">**</span><span class="n">tick</span> <span class="k">for</span> <span class="n">tick</span> <span class="ow">in</span> <span class="n">ticks</span><span class="p">])</span>
            <span class="n">variable</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable</span>
            <span class="n">pyplot</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">left</span><span class="o">=.</span><span class="mi">2</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">variable</span> <span class="o">==</span> <span class="s1">&#39;Q&#39;</span><span class="p">:</span>
                <span class="n">variable</span> <span class="o">=</span> <span class="sa">u</span><span class="s1">&#39;Q [m/s]&#39;</span>
            <span class="n">pyplot</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="n">variable</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">isinteractive</span><span class="p">():</span>
                <span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">numpy</span><span class="o">.</span><span class="n">seterr</span><span class="p">(</span><span class="o">**</span><span class="n">old_settings</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assignrepr</span><span class="p">()</span>

<div class="viewcode-block" id="Node.assignrepr"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Node.assignrepr">[docs]</a>    <span class="k">def</span> <span class="nf">assignrepr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Defines the `visual appearence` of |Node| objects.</span>

<span class="sd">        You can pass a string which prefixes the string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">Node(&quot;</span><span class="si">%s</span><span class="s1">&quot;, variable=&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span>
                 <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">variable</span><span class="p">)]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="p">:</span>
            <span class="n">subprefix</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">keywords=&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">*</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span><span class="o">+</span><span class="mi">5</span><span class="p">))</span>
            <span class="k">with</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">repr_</span><span class="o">.</span><span class="n">preserve_strings</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
                <span class="k">with</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_tuple</span><span class="o">.</span><span class="n">always_bracketed</span><span class="p">(</span><span class="kc">False</span><span class="p">):</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_list</span><span class="p">(</span>
                        <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="p">),</span> <span class="n">subprefix</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">)</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span>
        <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;)&#39;</span>
        <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div></div>


<span class="n">abctools</span><span class="o">.</span><span class="n">NodeABC</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Node</span><span class="p">)</span>


<div class="viewcode-block" id="Element"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element">[docs]</a><span class="k">class</span> <span class="nc">Element</span><span class="p">(</span><span class="n">Device</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Handles a |Model| and connects it to other models via |Node| objects.</span>

<span class="sd">    You are allowed to pass keywords to the constructor of class |Element|,</span>
<span class="sd">    as shown above for class |Node|.</span>

<span class="sd">    Additionally, you are allowed to pass different nodes (or names of</span>
<span class="sd">    nodes) by successive constructor calls, e.g.:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy import Element, Node</span>
<span class="sd">    &gt;&gt;&gt; Element(&#39;test&#39;)</span>
<span class="sd">    Element(&quot;test&quot;)</span>
<span class="sd">    &gt;&gt;&gt; Element(&#39;test&#39;,</span>
<span class="sd">    ...         inlets=&#39;in1&#39;,</span>
<span class="sd">    ...         outlets=&#39;out1&#39;,</span>
<span class="sd">    ...         receivers=&#39;rec1&#39;,</span>
<span class="sd">    ...         senders=&#39;sen1&#39;)</span>
<span class="sd">    Element(&quot;test&quot;,</span>
<span class="sd">            inlets=&quot;in1&quot;,</span>
<span class="sd">            outlets=&quot;out1&quot;,</span>
<span class="sd">            receivers=&quot;rec1&quot;,</span>
<span class="sd">            senders=&quot;sen1&quot;)</span>
<span class="sd">    &gt;&gt;&gt; Element(&#39;test&#39;,</span>
<span class="sd">    ...         inlets=(&#39;in2&#39;, Node(&#39;in3&#39;)),</span>
<span class="sd">    ...         outlets=(&#39;out2&#39;, Node(&#39;out3&#39;)),</span>
<span class="sd">    ...         receivers=(&#39;rec2&#39;, Node(&#39;rec3&#39;)),</span>
<span class="sd">    ...         senders=(&#39;sen2&#39;, Node(&#39;sen3&#39;)))</span>
<span class="sd">    Element(&quot;test&quot;,</span>
<span class="sd">            inlets=[&quot;in1&quot;, &quot;in2&quot;, &quot;in3&quot;],</span>
<span class="sd">            outlets=[&quot;out1&quot;, &quot;out2&quot;, &quot;out3&quot;],</span>
<span class="sd">            receivers=[&quot;rec1&quot;, &quot;rec2&quot;, &quot;rec3&quot;],</span>
<span class="sd">            senders=[&quot;sen1&quot;, &quot;sen2&quot;, &quot;sen3&quot;])</span>

<span class="sd">    Reassigning some nodes does no harm:</span>

<span class="sd">    &gt;&gt;&gt; Element(&#39;test&#39;,</span>
<span class="sd">    ...         inlets=(&#39;in2&#39;, Node(&#39;in3&#39;), &#39;in4&#39;),</span>
<span class="sd">    ...         outlets=(&#39;out2&#39;, Node(&#39;out3&#39;), &#39;out4&#39;),</span>
<span class="sd">    ...         receivers=(&#39;rec2&#39;, Node(&#39;rec3&#39;), &#39;rec4&#39;),</span>
<span class="sd">    ...         senders=(&#39;sen2&#39;, Node(&#39;sen3&#39;), &#39;sen4&#39;))</span>
<span class="sd">    Element(&quot;test&quot;,</span>
<span class="sd">            inlets=[&quot;in1&quot;, &quot;in2&quot;, &quot;in3&quot;, &quot;in4&quot;],</span>
<span class="sd">            outlets=[&quot;out1&quot;, &quot;out2&quot;, &quot;out3&quot;, &quot;out4&quot;],</span>
<span class="sd">            receivers=[&quot;rec1&quot;, &quot;rec2&quot;, &quot;rec3&quot;, &quot;rec4&quot;],</span>
<span class="sd">            senders=[&quot;sen1&quot;, &quot;sen2&quot;, &quot;sen3&quot;, &quot;sen4&quot;])</span>

<span class="sd">    But it is verified that an element does not handle the same node as</span>
<span class="sd">    an `input` and `output` node or as a `receiver` and a `sender` node:</span>

<span class="sd">    &gt;&gt;&gt; Element(&#39;test&#39;, inlets=&#39;out1&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: For element `test`, the given inlet node `out1` is already \</span>
<span class="sd">defined as an outlet node, which is not allowed.</span>

<span class="sd">    &gt;&gt;&gt; Element(&#39;test&#39;, outlets=&#39;in1&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: For element `test`, the given outlet node `in1` is already \</span>
<span class="sd">defined as an inlet node, which is not allowed.</span>

<span class="sd">    &gt;&gt;&gt; Element(&#39;test&#39;, receivers=&#39;sen1&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: For element `test`, the given receiver node `sen1` is already \</span>
<span class="sd">defined as a sender node, which is not allowed.</span>

<span class="sd">    &gt;&gt;&gt; Element(&#39;test&#39;, senders=&#39;rec1&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    ValueError: For element `test`, the given sender node `rec1` is already \</span>
<span class="sd">defined as a receiver, node which is not allowed.</span>



<span class="sd">    Note the technical remarks regarding the permanent registry of</span>
<span class="sd">    |Device| objects explained above (which also help to understand</span>
<span class="sd">    how the last examples work behind the scenes.)  Additionally, the</span>
<span class="sd">    remarks on the temperal registry of |Node| objects also apply</span>
<span class="sd">    on |Element| objects.  Without to repeat the whole explanation,</span>
<span class="sd">    this can be shown by the following short example:</span>

<span class="sd">    &gt;&gt;&gt; from hydpy import Elements</span>
<span class="sd">    &gt;&gt;&gt; Element.clear_registry()</span>
<span class="sd">    &gt;&gt;&gt; Elements(&#39;e1&#39;, &#39;e2&#39;).e1.gather_new_elements()</span>
<span class="sd">    Elements(&quot;e1&quot;, &quot;e2&quot;)</span>
<span class="sd">    &gt;&gt;&gt; Elements(&#39;e3&#39;, &#39;e1&#39;).e1.gather_new_elements()</span>
<span class="sd">    Elements(&quot;e1&quot;, &quot;e3&quot;)</span>
<span class="sd">    &gt;&gt;&gt; Element.gather_new_elements()</span>
<span class="sd">    Elements()</span>
<span class="sd">    &gt;&gt;&gt; Element.registered_elements()</span>
<span class="sd">    Elements(&quot;e1&quot;, &quot;e2&quot;, &quot;e3&quot;)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_registry</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">_selection</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">__new__</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">inlets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">outlets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                <span class="n">receivers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">keywords</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return an already existing |Element| instance or, if such</span>
<span class="sd">        an instance does not exist yet, a new newly created one.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">:</span>
            <span class="bp">self</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">(</span><span class="n">Element</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_check_name</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_name</span> <span class="o">=</span> <span class="n">name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">inlets</span> <span class="o">=</span> <span class="n">connectiontools</span><span class="o">.</span><span class="n">Connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;inlets&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">outlets</span> <span class="o">=</span> <span class="n">connectiontools</span><span class="o">.</span><span class="n">Connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;outlets&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">receivers</span> <span class="o">=</span> <span class="n">connectiontools</span><span class="o">.</span><span class="n">Connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;receivers&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">senders</span> <span class="o">=</span> <span class="n">connectiontools</span><span class="o">.</span><span class="n">Connections</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;senders&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_all_connections</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">inlets</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">outlets</span><span class="p">,</span>
                                     <span class="bp">self</span><span class="o">.</span><span class="n">receivers</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">senders</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_keywords</span> <span class="o">=</span> <span class="n">Keywords</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_keywords</span><span class="o">.</span><span class="n">device</span> <span class="o">=</span> <span class="bp">self</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_handlers</span> <span class="o">=</span> <span class="n">weakref</span><span class="o">.</span><span class="n">WeakSet</span><span class="p">()</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_selection</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
        <span class="k">return</span> <span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">inlets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">outlets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">receivers</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">senders</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">keywords</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add the given |Node| objects via the corresponding |Connection|</span>
<span class="sd">        objects.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">inlets</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">inlet</span> <span class="ow">in</span> <span class="n">Nodes</span><span class="p">(</span><span class="n">inlets</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">inlet</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">outlets</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;For element `</span><span class="si">%s</span><span class="s1">`, the given inlet node `</span><span class="si">%s</span><span class="s1">` is &#39;</span>
                        <span class="s1">&#39;already defined as an outlet node, which is not &#39;</span>
                        <span class="s1">&#39;allowed.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">inlet</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">inlets</span> <span class="o">+=</span> <span class="n">inlet</span>
                <span class="n">inlet</span><span class="o">.</span><span class="n">exits</span> <span class="o">+=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">outlets</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">outlet</span> <span class="ow">in</span> <span class="n">Nodes</span><span class="p">(</span><span class="n">outlets</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">outlet</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">inlets</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;For element `</span><span class="si">%s</span><span class="s1">`, the given outlet node `</span><span class="si">%s</span><span class="s1">` is &#39;</span>
                        <span class="s1">&#39;already defined as an inlet node, which is not &#39;</span>
                        <span class="s1">&#39;allowed.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">outlet</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">outlets</span> <span class="o">+=</span> <span class="n">outlet</span>
                <span class="n">outlet</span><span class="o">.</span><span class="n">entries</span> <span class="o">+=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">receivers</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">receiver</span> <span class="ow">in</span> <span class="n">Nodes</span><span class="p">(</span><span class="n">receivers</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">receiver</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">senders</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;For element `</span><span class="si">%s</span><span class="s1">`, the given receiver node `</span><span class="si">%s</span><span class="s1">` is &#39;</span>
                        <span class="s1">&#39;already defined as a sender node, which is not &#39;</span>
                        <span class="s1">&#39;allowed.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">receiver</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">receivers</span> <span class="o">+=</span> <span class="n">receiver</span>
                <span class="n">receiver</span><span class="o">.</span><span class="n">exits</span> <span class="o">+=</span> <span class="bp">self</span>
        <span class="k">if</span> <span class="n">senders</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">sender</span> <span class="ow">in</span> <span class="n">Nodes</span><span class="p">(</span><span class="n">senders</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">sender</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">receivers</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s1">&#39;For element `</span><span class="si">%s</span><span class="s1">`, the given sender node `</span><span class="si">%s</span><span class="s1">` is &#39;</span>
                        <span class="s1">&#39;already defined as a receiver, node which is not &#39;</span>
                        <span class="s1">&#39;allowed.&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">))</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">senders</span> <span class="o">+=</span> <span class="n">sender</span>
                <span class="n">sender</span><span class="o">.</span><span class="n">entries</span> <span class="o">+=</span> <span class="bp">self</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span> <span class="o">=</span> <span class="n">keywords</span>

<div class="viewcode-block" id="Element.registered_elements"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.registered_elements">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">registered_elements</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Get all |Element| objects initialized so far.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">Elements</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_registry</span><span class="o">.</span><span class="n">values</span><span class="p">())</span></div>

<div class="viewcode-block" id="Element.gather_new_elements"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.gather_new_elements">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">gather_new_elements</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Gather all `new` |Element| objects. |Element| objects are</span>
<span class="sd">        deemed to be new if they have been created after the last usage</span>
<span class="sd">        of this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">elements</span> <span class="o">=</span> <span class="n">Elements</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="n">_selection</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_selection</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">elements</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">variables</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A set of all different variables of the nodes directly connected</span>
<span class="sd">        to this element.</span>

<span class="sd">        Suppose there is a element connected to five nodes, which (partly)</span>
<span class="sd">        represent different variables:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import Element, Node</span>
<span class="sd">        &gt;&gt;&gt; element = Element(&#39;Test&#39;,</span>
<span class="sd">        ...                   inlets=(Node(&#39;N1&#39;, &#39;X&#39;), Node(&#39;N2&#39;, &#39;Y1&#39;)),</span>
<span class="sd">        ...                   outlets=(Node(&#39;N3&#39;, &#39;X&#39;), Node(&#39;N4&#39;, &#39;Y2&#39;)),</span>
<span class="sd">        ...                   receivers=(Node(&#39;N5&#39;, &#39;X&#39;), Node(&#39;N6&#39;, &#39;Y3&#39;)),</span>
<span class="sd">        ...                   senders=(Node(&#39;N7&#39;, &#39;X&#39;), Node(&#39;N8&#39;, &#39;Y4&#39;)))</span>

<span class="sd">        `variables` puts all the different variables of these nodes together:</span>

<span class="sd">        &gt;&gt;&gt; sorted(element.variables)</span>
<span class="sd">        [&#39;X&#39;, &#39;Y1&#39;, &#39;Y2&#39;, &#39;Y3&#39;, &#39;Y4&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">variables</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">connections</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">variables</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">connections</span><span class="o">.</span><span class="n">variables</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">variables</span>

<div class="viewcode-block" id="Element.init_model"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.init_model">[docs]</a>    <span class="k">def</span> <span class="nf">init_model</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">clear_registry</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Load the control file of the actual |Element| object, initialize</span>
<span class="sd">        its |Model| object and build the required connections.&quot;&quot;&quot;</span>
        <span class="n">info</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">load_file</span><span class="p">(</span>
            <span class="n">element</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">clear_registry</span><span class="o">=</span><span class="n">clear_registry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">info</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">])</span></div>

<div class="viewcode-block" id="Element.connect"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.connect">[docs]</a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">model</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Connect the handled |Model| with the actual |Element| object.</span>

<span class="sd">        The following examples involve an error that is catched cleanly</span>
<span class="sd">        only in pure Python mode, hence Cython is disabled:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import pub</span>
<span class="sd">        &gt;&gt;&gt; pub.options.usecython = False</span>

<span class="sd">        If a model is passed, proper connections with this model are build</span>
<span class="sd">        We use the &quot;HBV branch model&quot; |hbranch| as an  example, which</span>
<span class="sd">        branches a single input value (from to node `inp`) to multiple</span>
<span class="sd">        outputs (nodes `out1` and `out2`):</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import Element, Node</span>
<span class="sd">        &gt;&gt;&gt; element = Element(&#39;a_branch&#39;,</span>
<span class="sd">        ...                   inlets=&#39;branch_input&#39;,</span>
<span class="sd">        ...                   outlets=(&#39;branch_output_1&#39;, &#39;branch_output_2&#39;))</span>
<span class="sd">        &gt;&gt;&gt; inp = element.inlets.branch_input</span>
<span class="sd">        &gt;&gt;&gt; out1, out2 = element.outlets</span>
<span class="sd">        &gt;&gt;&gt; from hydpy.models.hbranch import *</span>
<span class="sd">        &gt;&gt;&gt; parameterstep()</span>
<span class="sd">        &gt;&gt;&gt; element.connect(model)</span>

<span class="sd">        To show that the inlet connection is built properly, assign a new</span>
<span class="sd">        value to the inlet node and verify that his value can actually be</span>
<span class="sd">        picked by the model:</span>

<span class="sd">        &gt;&gt;&gt; inp.sequences.sim = 999.0</span>
<span class="sd">        &gt;&gt;&gt; model.pick_input()</span>
<span class="sd">        &gt;&gt;&gt; fluxes.input</span>
<span class="sd">        input(999.0)</span>

<span class="sd">        If no model is passed to method `connect`, the connections with</span>
<span class="sd">        the model already handled by this element are refreshed.  In the</span>
<span class="sd">        given example, the `hbranch` model could already le to connected</span>
<span class="sd">        to its inlet node, but not to its outlet nodes, which requires</span>
<span class="sd">        some parameter information on how to allocate the inflow to the</span>
<span class="sd">        different outlet nodes:</span>

<span class="sd">        &gt;&gt;&gt; xpoints(0.0, 3.0)</span>
<span class="sd">        &gt;&gt;&gt; ypoints(branch_output_1=[0.0, 1.0], branch_output_2=[0.0, 2.0])</span>
<span class="sd">        &gt;&gt;&gt; parameters.update()</span>
<span class="sd">        &gt;&gt;&gt; model.doit(0)</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        RuntimeError: The pointer of the acutal `PPDouble` instance at \</span>
<span class="sd">index 0 requested, but not prepared yet via `set_pointer`.</span>

<span class="sd">        The last command resulted in a somewhat strange error message.  The</span>
<span class="sd">        reason for the explained error is that the `hbranch` model does now</span>
<span class="sd">        know how to connect to the outlet nodes `out1` and `out2`, but has</span>
<span class="sd">        not been requested to do so.  When we do so, no error is raised:</span>

<span class="sd">        &gt;&gt;&gt; element.connect()</span>
<span class="sd">        &gt;&gt;&gt; parameters.update()</span>
<span class="sd">        &gt;&gt;&gt; model.doit(0)</span>

<span class="sd">        Now we can prove that both the inlet and the outlet connections are</span>
<span class="sd">        build properly by verifying that the expected output values are</span>
<span class="sd">        actually passed to the outlet nodes while performing an simulation</span>
<span class="sd">        step with method `doit` above:</span>

<span class="sd">        &gt;&gt;&gt; out1.sequences.sim</span>
<span class="sd">        sim(333.0)</span>
<span class="sd">        &gt;&gt;&gt; out2.sequences.sim</span>
<span class="sd">        sim(666.0)</span>


<span class="sd">        If neither a model is passed nor an model is already handled, an</span>
<span class="sd">        erro is raised:</span>

<span class="sd">        &gt;&gt;&gt; Element(&#39;empty&#39;).connect()</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        AttributeError: While trying to build the connections of the model \</span>
<span class="sd">handled by element `empty`, the following error occured: No model has been \</span>
<span class="sd">assigned to the element so far.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">model</span> <span class="o">=</span> <span class="n">model</span>
            <span class="n">model</span><span class="o">.</span><span class="n">element</span> <span class="o">=</span> <span class="bp">self</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">model</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;model&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                    <span class="s1">&#39;No model has been assigned to the element so far.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
            <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                <span class="s1">&#39;While trying to build the connections of the model handled &#39;</span>
                <span class="s1">&#39;by element `</span><span class="si">%s</span><span class="s1">`&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.open_files"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.open_files">[docs]</a>    <span class="k">def</span> <span class="nf">open_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Sequences.open_files| of the |Sequences| object</span>
<span class="sd">        handled (indirectly) by the actual |Element| object.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">open_files</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.close_files"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.close_files">[docs]</a>    <span class="k">def</span> <span class="nf">close_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Sequences.close_files| of the |Sequences| object</span>
<span class="sd">        handled (indirectly) by the actual |Element| object.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">close_files</span><span class="p">()</span></div>

<div class="viewcode-block" id="Element.prepare_allseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.prepare_allseries">[docs]</a>    <span class="k">def</span> <span class="nf">prepare_allseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prepare the series objects of all `input`, `flux` and `state`</span>
<span class="sd">        sequences of the model handled by this element.</span>

<span class="sd">        Call this method before a simulation run, if you need access to</span>
<span class="sd">        (nearly) all simulated series of the handled model after the</span>
<span class="sd">        simulation run is finished.</span>

<span class="sd">        By default, the series are stored in RAM, which is the faster</span>
<span class="sd">        option.  If your RAM is limited, pass the `False` for function</span>
<span class="sd">        argument `ramflag` to store the series on disk.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepare_inputseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepare_fluxseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepare_stateseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.prepare_inputseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.prepare_inputseries">[docs]</a>    <span class="k">def</span> <span class="nf">prepare_inputseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prepare the series objects of the `input` sequences of the model</span>
<span class="sd">        handled by this element.</span>

<span class="sd">        See method |Element.prepare_allseries| for further information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_series</span><span class="p">(</span><span class="s1">&#39;inputs&#39;</span><span class="p">,</span> <span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.prepare_fluxseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.prepare_fluxseries">[docs]</a>    <span class="k">def</span> <span class="nf">prepare_fluxseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prepare the series objects of the `flux` sequences of the model</span>
<span class="sd">        handled by this element.</span>

<span class="sd">        See method |Element.prepare_allseries| for further information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_series</span><span class="p">(</span><span class="s1">&#39;fluxes&#39;</span><span class="p">,</span> <span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.prepare_stateseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.prepare_stateseries">[docs]</a>    <span class="k">def</span> <span class="nf">prepare_stateseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Prepare the series objects of the `state` sequences of the model</span>
<span class="sd">        handled by this element.</span>

<span class="sd">        See method |Element.prepare_allseries| for further information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_prepare_series</span><span class="p">(</span><span class="s1">&#39;states&#39;</span><span class="p">,</span> <span class="n">ramflag</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_prepare_series</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_subseqs</span><span class="p">,</span> <span class="n">ramflag</span><span class="p">):</span>
        <span class="n">sequences</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span>
        <span class="n">subseqs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sequences</span><span class="p">,</span> <span class="n">name_subseqs</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">subseqs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">ramflag</span><span class="p">:</span>
                <span class="n">subseqs</span><span class="o">.</span><span class="n">activate_ram</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">subseqs</span><span class="o">.</span><span class="n">activate_disk</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">subseqs</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">names</span><span class="p">:</span>
            <span class="n">selseqs</span> <span class="o">=</span> <span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">subseqs</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">selseqs</span> <span class="o">=</span> <span class="n">subseqs</span>
        <span class="k">for</span> <span class="n">seq</span> <span class="ow">in</span> <span class="n">selseqs</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">seq</span><span class="o">.</span><span class="n">NDIM</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">label</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">seq</span><span class="o">.</span><span class="n">name</span><span class="p">)))</span>
                <span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">seq</span><span class="o">.</span><span class="n">series</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">pyplot</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">color</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;color&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">))</span>
                <span class="n">pyplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">seq</span><span class="o">.</span><span class="n">series</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="n">color</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">pyplot</span><span class="o">.</span><span class="n">isinteractive</span><span class="p">():</span>
            <span class="n">pyplot</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<div class="viewcode-block" id="Element.plot_inputseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.plot_inputseries">[docs]</a>    <span class="k">def</span> <span class="nf">plot_inputseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plot the `input` series of the handled model.</span>

<span class="sd">        To plot the series of a subset of all sequences, pass the respective</span>
<span class="sd">        names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">inputs</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.plot_fluxseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.plot_fluxseries">[docs]</a>    <span class="k">def</span> <span class="nf">plot_fluxseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plot the `flux` series of the handled model.</span>

<span class="sd">        To plot the series of a subset of all sequences, pass the respective</span>
<span class="sd">        names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">fluxes</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.plot_stateseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.plot_stateseries">[docs]</a>    <span class="k">def</span> <span class="nf">plot_stateseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Plot the `state` series of the handled model.</span>

<span class="sd">        To plot the series of a subset of all sequences, pass the respective</span>
<span class="sd">        names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">states</span><span class="p">,</span> <span class="n">names</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span></div>

<div class="viewcode-block" id="Element.assignrepr"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Element.assignrepr">[docs]</a>    <span class="k">def</span> <span class="nf">assignrepr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Defines the `visual appearence` of |Element| objects.</span>

<span class="sd">        You can pass a string which prefixes the string representation.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">repr_</span><span class="o">.</span><span class="n">preserve_strings</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_tuple</span><span class="o">.</span><span class="n">always_bracketed</span><span class="p">(</span><span class="kc">False</span><span class="p">):</span>
                <span class="n">blanks</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">prefix</span><span class="p">)</span> <span class="o">+</span> <span class="mi">8</span><span class="p">)</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">Element(&quot;</span><span class="si">%s</span><span class="s1">&quot;,&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">prefix</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)]</span>
                <span class="k">for</span> <span class="n">conname</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;inlets&#39;</span><span class="p">,</span> <span class="s1">&#39;outlets&#39;</span><span class="p">,</span> <span class="s1">&#39;receivers&#39;</span><span class="p">,</span> <span class="s1">&#39;senders&#39;</span><span class="p">):</span>
                    <span class="n">connections</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conname</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">connections</span><span class="p">:</span>
                        <span class="n">subprefix</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s%s</span><span class="s1">=&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">blanks</span><span class="p">,</span> <span class="n">conname</span><span class="p">)</span>
                        <span class="n">nodes</span> <span class="o">=</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">node</span><span class="p">)</span> <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">connections</span><span class="o">.</span><span class="n">slaves</span><span class="p">]</span>
                        <span class="n">line</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_list</span><span class="p">(</span>
                            <span class="n">nodes</span><span class="p">,</span> <span class="n">subprefix</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">)</span>
                        <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="p">:</span>
                    <span class="n">subprefix</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">keywords=&#39;</span> <span class="o">%</span> <span class="n">blanks</span>
                    <span class="n">line</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_list</span><span class="p">(</span>
                        <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="p">),</span> <span class="n">subprefix</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">)</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span> <span class="o">+</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span>
                <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">+</span><span class="s1">&#39;)&#39;</span>
                <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assignrepr</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span></div>


<span class="n">abctools</span><span class="o">.</span><span class="n">ElementABC</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">Element</span><span class="p">)</span>


<div class="viewcode-block" id="Devices"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Devices">[docs]</a><span class="k">class</span> <span class="nc">Devices</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Base class for class |Elements| and class |Nodes|.</span>

<span class="sd">    There are only small differences between class |Elements| and class</span>
<span class="sd">    |Nodes|.  We focus our explanations on class |Nodes| arbitrarily.</span>

<span class="sd">    The following test objects are used to explain the methods</span>
<span class="sd">    and properties of class |Device| (note the different types of</span>
<span class="sd">    the initialization arguments):</span>

<span class="sd">    &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">    &gt;&gt;&gt; from hydpy import Node, Nodes, Element, Elements</span>
<span class="sd">    &gt;&gt;&gt; dummies.nodes = Nodes(&#39;na&#39;,</span>
<span class="sd">    ...                       Node(&#39;nb&#39;, variable=&#39;W&#39;),</span>
<span class="sd">    ...                       Node(&#39;nc&#39;, keywords=(&#39;group_a&#39;, &#39;group_1&#39;)),</span>
<span class="sd">    ...                       Node(&#39;nd&#39;, keywords=(&#39;group_a&#39;, &#39;group_2&#39;)),</span>
<span class="sd">    ...                       Node(&#39;ne&#39;, keywords=(&#39;group_b&#39;, &#39;group_1&#39;)))</span>
<span class="sd">    &gt;&gt;&gt; dummies.elements = Elements(&#39;ea&#39;, Element(&#39;eb&#39;))</span>

<span class="sd">    In a nutshell, |Devices| instances are containers supporting</span>
<span class="sd">    attribute access.  You can access each device directly by its name:</span>

<span class="sd">    &gt;&gt;&gt; nodes = dummies.nodes</span>
<span class="sd">    &gt;&gt;&gt; nodes.na</span>
<span class="sd">    Node(&quot;na&quot;, variable=&quot;Q&quot;)</span>

<span class="sd">    Wrong device names result in the following error message:</span>

<span class="sd">    &gt;&gt;&gt; nodes.na_</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    AttributeError: The selected Nodes object has neither a `na_` \</span>
<span class="sd">attribute nor does it handle a Node object with name or keyword `na_`, \</span>
<span class="sd">which could be returned.</span>

<span class="sd">    Sometimes it is more convenient to receive empty always iterables, even</span>
<span class="sd">    empty ones (especially when using keyword access, see below).  This</span>
<span class="sd">    cann be done by change the `return_always_iterables` class flag:</span>

<span class="sd">    &gt;&gt;&gt; Nodes.return_always_iterables = True</span>
<span class="sd">    &gt;&gt;&gt; nodes.na_</span>
<span class="sd">    Nodes()</span>
<span class="sd">    &gt;&gt;&gt; nodes.na</span>
<span class="sd">    Nodes(&quot;na&quot;)</span>
<span class="sd">    &gt;&gt;&gt; Nodes.return_always_iterables = False</span>

<span class="sd">    Attribute deleting is supported:</span>

<span class="sd">    &gt;&gt;&gt; &#39;na&#39; in nodes</span>
<span class="sd">    True</span>
<span class="sd">    &gt;&gt;&gt; del nodes.na</span>
<span class="sd">    &gt;&gt;&gt; &#39;na&#39; in nodes</span>
<span class="sd">    False</span>
<span class="sd">    &gt;&gt;&gt; del nodes.na</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    AttributeError: The selected Nodes object has neither a `na` attribute \</span>
<span class="sd">nor does it handle a Node object named `na`, which could be deleted.</span>

<span class="sd">    However, exemplified by the next example, setting devices as attributes</span>
<span class="sd">    &quot;pythonically&quot; could result in inconsistencies and is not allowed</span>
<span class="sd">    (see method |Devices.add_device| instead):</span>

<span class="sd">    &gt;&gt;&gt; nodes.NF = Node(&#39;nf&#39;)</span>
<span class="sd">    Traceback (most recent call last):</span>
<span class="sd">    ...</span>
<span class="sd">    NotImplementedError: Setting attributes of Nodes objects could result \</span>
<span class="sd">in confusion whether a new attribute should be handled as a Node object or \</span>
<span class="sd">as a &quot;normal&quot; attribute and is thus not support.</span>

<span class="sd">    The operators `+`, `+=`, `-` and `-=` support adding and removing</span>
<span class="sd">    groups of devices:</span>

<span class="sd">    &gt;&gt;&gt; subgroup = Nodes(&quot;nc&quot;, &quot;ne&quot;)</span>

<span class="sd">    &gt;&gt;&gt; nodes</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nc&quot;, &quot;nd&quot;, &quot;ne&quot;)</span>
<span class="sd">    &gt;&gt;&gt; subgroup</span>
<span class="sd">    Nodes(&quot;nc&quot;, &quot;ne&quot;)</span>
<span class="sd">    &gt;&gt;&gt; nodes - subgroup</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nd&quot;)</span>

<span class="sd">    &gt;&gt;&gt; nodes</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nc&quot;, &quot;nd&quot;, &quot;ne&quot;)</span>
<span class="sd">    &gt;&gt;&gt; nodes -= subgroup</span>
<span class="sd">    &gt;&gt;&gt; nodes</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nd&quot;)</span>

<span class="sd">    &gt;&gt;&gt; nodes + subgroup</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nc&quot;, &quot;nd&quot;, &quot;ne&quot;)</span>
<span class="sd">    &gt;&gt;&gt; nodes</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nd&quot;)</span>
<span class="sd">    &gt;&gt;&gt; nodes += subgroup</span>
<span class="sd">    &gt;&gt;&gt; nodes</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nc&quot;, &quot;nd&quot;, &quot;ne&quot;)</span>

<span class="sd">    Trying to add already existing are to remove non existing devices</span>
<span class="sd">    does no harm:</span>

<span class="sd">    &gt;&gt;&gt; nodes</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nc&quot;, &quot;nd&quot;, &quot;ne&quot;)</span>
<span class="sd">    &gt;&gt;&gt; nodes + subgroup</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nc&quot;, &quot;nd&quot;, &quot;ne&quot;)</span>
<span class="sd">    &gt;&gt;&gt; nodes - Node(&#39;na&#39;)</span>
<span class="sd">    Nodes(&quot;nb&quot;, &quot;nc&quot;, &quot;nd&quot;, &quot;ne&quot;)</span>

<span class="sd">    Finally, the following &quot;set operators&quot; are supported:</span>

<span class="sd">    &gt;&gt;&gt; subgroup &lt; nodes, nodes &lt; subgroup, nodes &lt; nodes</span>
<span class="sd">    (True, False, False)</span>
<span class="sd">    &gt;&gt;&gt; subgroup &lt;= nodes, nodes &lt;= subgroup, nodes &lt;= nodes</span>
<span class="sd">    (True, False, True)</span>
<span class="sd">    &gt;&gt;&gt; subgroup == nodes, nodes == subgroup, nodes == nodes</span>
<span class="sd">    (False, False, True)</span>
<span class="sd">    &gt;&gt;&gt; subgroup != nodes, nodes != subgroup, nodes != nodes</span>
<span class="sd">    (True, True, False)</span>
<span class="sd">    &gt;&gt;&gt; subgroup &gt;= nodes, nodes &gt;= subgroup, nodes &gt;= nodes</span>
<span class="sd">    (False, True, True)</span>
<span class="sd">    &gt;&gt;&gt; subgroup &gt; nodes, nodes &gt; subgroup, nodes &gt; nodes</span>
<span class="sd">    (False, True, False)</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">_contentclass</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">return_always_iterables</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">values</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">ResetAttrFuncs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_devices</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_shadowed_keywords</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_extract_values</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">BaseException</span><span class="p">:</span>
            <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                <span class="s1">&#39;While trying to initialize a `</span><span class="si">%s</span><span class="s1">` object&#39;</span>
                <span class="o">%</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_extract_values</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">extract</span><span class="p">(</span>
                <span class="n">values</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_contentclass</span><span class="p">,</span> <span class="nb">str</span><span class="p">),</span> <span class="n">skip</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_device</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<div class="viewcode-block" id="Devices.add_device"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Devices.add_device">[docs]</a>    <span class="k">def</span> <span class="nf">add_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add the given |Node| or |Element| object.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import Nodes</span>
<span class="sd">        &gt;&gt;&gt; nodes = Nodes(&#39;old_node&#39;)</span>
<span class="sd">        &gt;&gt;&gt; nodes.add_device(&#39;new_node&#39;)</span>
<span class="sd">        &gt;&gt;&gt; nodes</span>
<span class="sd">        Nodes(&quot;new_node&quot;, &quot;old_node&quot;)</span>

<span class="sd">        Note the implementation detail, that each new node knows the</span>
<span class="sd">        object it was added to:</span>

<span class="sd">        &gt;&gt;&gt; nodes in nodes.new_node._handlers</span>
<span class="sd">        True</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contentclass</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">device</span>
        <span class="n">device</span><span class="o">.</span><span class="n">add_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

<div class="viewcode-block" id="Devices.remove_device"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Devices.remove_device">[docs]</a>    <span class="k">def</span> <span class="nf">remove_device</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Remove the given |Node| or |Element| object.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import Node, Nodes</span>
<span class="sd">        &gt;&gt;&gt; nodes = Nodes(&#39;node_x&#39;, &#39;node_y&#39;)</span>
<span class="sd">        &gt;&gt;&gt; node_x, node_y = nodes</span>
<span class="sd">        &gt;&gt;&gt; nodes.remove_device(&#39;node_y&#39;)</span>
<span class="sd">        &gt;&gt;&gt; nodes</span>
<span class="sd">        Nodes(&quot;node_x&quot;)</span>

<span class="sd">        Note the implementation detail, that a new node forgots its</span>
<span class="sd">        container object, after it has been removed:</span>

<span class="sd">        &gt;&gt;&gt; nodes in node_x._handlers</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; nodes in node_y._handlers</span>
<span class="sd">        False</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contentclass</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="p">[</span><span class="n">device</span><span class="o">.</span><span class="n">name</span><span class="p">]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
                <span class="s1">&#39;The selected </span><span class="si">%s</span><span class="s1"> object does not handle a </span><span class="si">%s</span><span class="s1"> object named &#39;</span>
                <span class="s1">&#39;`</span><span class="si">%s</span><span class="s1">`, which could be removed.&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span>
                   <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_contentclass</span><span class="p">),</span> <span class="n">device</span><span class="p">))</span>
        <span class="n">device</span><span class="o">.</span><span class="n">remove_handler</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></div>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">names</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A sorted tuple of the names of the handled devices.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; dummies.nodes.names</span>
<span class="sd">        (&#39;na&#39;, &#39;nb&#39;, &#39;nc&#39;, &#39;nd&#39;, &#39;ne&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">device</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">devices</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A tuple of the handled devices sorted by the device names.</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; tuple(device.name for device in dummies.nodes.devices)</span>
<span class="sd">        (&#39;na&#39;, &#39;nb&#39;, &#39;nc&#39;, &#39;nd&#39;, &#39;ne&#39;)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">device</span> <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">)</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">keywords</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;A set of all keywords of all handled devices.</span>

<span class="sd">        In addition to attribute access via device names described above,</span>
<span class="sd">        |Device| objects allow for attribute access via keywords.</span>
<span class="sd">        This allows for an efficient search of certain groups of devices.</span>
<span class="sd">        Lets use the example from above, where the nodes `na` and `nb`</span>
<span class="sd">        have no keywords but each of the other three nodes both belongs</span>
<span class="sd">        to either `group_a` or `group_b` and `group_1` or `group_2`:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; nodes = dummies.nodes</span>
<span class="sd">        &gt;&gt;&gt; nodes</span>
<span class="sd">        Nodes(&quot;na&quot;, &quot;nb&quot;, &quot;nc&quot;, &quot;nd&quot;, &quot;ne&quot;)</span>
<span class="sd">        &gt;&gt;&gt; sorted(nodes.keywords)</span>
<span class="sd">        [&#39;group_1&#39;, &#39;group_2&#39;, &#39;group_a&#39;, &#39;group_b&#39;]</span>

<span class="sd">        If you are interesting in inspecting all nodes belonging to `group_a`,</span>
<span class="sd">        build a selection:</span>

<span class="sd">        &gt;&gt;&gt; subgroup = nodes.group_1</span>
<span class="sd">        &gt;&gt;&gt; subgroup</span>
<span class="sd">        Nodes(&quot;nc&quot;, &quot;ne&quot;)</span>

<span class="sd">        You can further restrict the search by also selecting the nodes also</span>
<span class="sd">        belonging to `group_b`, which holds true for node `ne` only:</span>

<span class="sd">        &gt;&gt;&gt; subsubgroup = subgroup.group_b</span>
<span class="sd">        &gt;&gt;&gt; subsubgroup</span>
<span class="sd">        Node(&quot;ne&quot;, variable=&quot;Q&quot;,</span>
<span class="sd">             keywords=[&quot;group_1&quot;, &quot;group_b&quot;])</span>

<span class="sd">        Node that the keywords already used for building a subgroup of nodes</span>
<span class="sd">        are no informative anymore (as they hold true for each node) and are</span>
<span class="sd">        thus not shown anymore:</span>

<span class="sd">        &gt;&gt;&gt; sorted(subgroup.keywords)</span>
<span class="sd">        [&#39;group_a&#39;, &#39;group_b&#39;]</span>

<span class="sd">        The latter might be confusing, if you intend to work with a subgroup</span>
<span class="sd">        of nodes for a longer time.  After copying the subgroup, all keywords</span>
<span class="sd">        of the contained devices are available again:</span>

<span class="sd">        &gt;&gt;&gt; newgroup = subgroup.copy()</span>
<span class="sd">        &gt;&gt;&gt; sorted(newgroup.keywords)</span>
<span class="sd">        [&#39;group_1&#39;, &#39;group_a&#39;, &#39;group_b&#39;]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="n">keyword</span> <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span>
                   <span class="k">for</span> <span class="n">keyword</span> <span class="ow">in</span> <span class="n">device</span><span class="o">.</span><span class="n">keywords</span> <span class="k">if</span>
                   <span class="n">keyword</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadowed_keywords</span><span class="p">)</span>

<div class="viewcode-block" id="Devices.open_files"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Devices.open_files">[docs]</a>    <span class="k">def</span> <span class="nf">open_files</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Node.open_files| or |Element.open_files| of all</span>
<span class="sd">        contained |Node| or |Element| objects.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">device</span><span class="o">.</span><span class="n">open_files</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span></div>

<div class="viewcode-block" id="Devices.close_files"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Devices.close_files">[docs]</a>    <span class="k">def</span> <span class="nf">close_files</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Node.close_files| or |Element.close_files| of</span>
<span class="sd">        all contained |Node| or |Element| objects.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">device</span><span class="o">.</span><span class="n">close_files</span><span class="p">()</span></div>

<div class="viewcode-block" id="Devices.copy"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Devices.copy">[docs]</a>    <span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a shallow copy of the actual |Devices| instance.</span>

<span class="sd">        Make a flat copy of the |Nodes| object defined above:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; old = dummies.nodes</span>
<span class="sd">        &gt;&gt;&gt; import copy</span>
<span class="sd">        &gt;&gt;&gt; new = copy.copy(old)</span>

<span class="sd">        Show that the copy is not completely flat:</span>

<span class="sd">        &gt;&gt;&gt; new == old</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; new is old</span>
<span class="sd">        False</span>
<span class="sd">        &gt;&gt;&gt; new._devices is old._devices</span>
<span class="sd">        False</span>
<span class="sd">        &gt;&gt;&gt; new.na is new.na</span>
<span class="sd">        True</span>

<span class="sd">        The private variable `_devices` obviously has also been copied,</span>
<span class="sd">        but not the device `na`.  Allowing also to copy devices like `na`</span>
<span class="sd">        would be in conflict with using their names as identifiers.</span>
<span class="sd">        For this reason deep copying |Devices| objects is disabled:</span>

<span class="sd">        &gt;&gt;&gt; copy.deepcopy(dummies.nodes)</span>
<span class="sd">        Traceback (most recent call last):</span>
<span class="sd">        ...</span>
<span class="sd">        NotImplementedError: Deep copying of Nodes objects is not supported, \</span>
<span class="sd">as it would require to make deep copies of the Node objects themselves, \</span>
<span class="sd">which is in conflict with using their names as identifiers.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">new</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)()</span>
        <span class="n">new</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)</span>
        <span class="n">new</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;_devices&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="p">)</span>
        <span class="n">new</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;_shadowed_keywords&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">device</span><span class="o">.</span><span class="n">add_handler</span><span class="p">(</span><span class="n">new</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new</span></div>

    <span class="n">__copy__</span> <span class="o">=</span> <span class="n">copy</span>

    <span class="k">def</span> <span class="nf">__deepcopy__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dict_</span><span class="p">):</span>
        <span class="n">classname</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s1">&#39;Deep copying of </span><span class="si">%s</span><span class="s1"> objects is not supported, as it would &#39;</span>
            <span class="s1">&#39;require to make deep copies of the </span><span class="si">%s</span><span class="s1"> objects themselves, &#39;</span>
            <span class="s1">&#39;which is in conflict with using their names as identifiers.&#39;</span>
            <span class="o">%</span> <span class="p">(</span><span class="n">classname</span><span class="p">,</span> <span class="n">classname</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">__iter__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">device</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
            <span class="k">yield</span> <span class="n">device</span>

    <span class="k">def</span> <span class="nf">_select_devices_by_keyword</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">devices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">device</span> <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span> <span class="k">if</span>
                                 <span class="n">name</span> <span class="ow">in</span> <span class="n">device</span><span class="o">.</span><span class="n">keywords</span><span class="p">)</span>
        <span class="n">devices</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;_shadowed_keywords&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_shadowed_keywords</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="n">devices</span><span class="o">.</span><span class="n">_shadowed_keywords</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">devices</span>

    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_devices</span> <span class="o">=</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__getattribute__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_devices&#39;</span><span class="p">)</span>
            <span class="n">_device</span> <span class="o">=</span> <span class="n">_devices</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_always_iterables</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">_device</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">_device</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="n">_devices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_select_devices_by_keyword</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">return_always_iterables</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">_devices</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_devices</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">_devices</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">_devices</span><span class="o">.</span><span class="n">devices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="s1">&#39;The selected </span><span class="si">%s</span><span class="s1"> object has neither a `</span><span class="si">%s</span><span class="s1">` attribute &#39;</span>
                <span class="s1">&#39;nor does it handle a </span><span class="si">%s</span><span class="s1"> object with name or keyword `</span><span class="si">%s</span><span class="s1">`, &#39;</span>
                <span class="s1">&#39;which could be returned.&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">name</span><span class="p">,</span>
                   <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_contentclass</span><span class="p">),</span> <span class="n">name</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="n">classname</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s1">&#39;Setting attributes of </span><span class="si">%s</span><span class="s1"> objects could result in confusion &#39;</span>
            <span class="s1">&#39;whether a new attribute should be handled as a </span><span class="si">%s</span><span class="s1"> object or &#39;</span>
            <span class="s1">&#39;as a &quot;normal&quot; attribute and is thus not support.&#39;</span>
            <span class="o">%</span> <span class="p">(</span><span class="n">classname</span><span class="p">,</span> <span class="n">classname</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">__delattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">deleted_something</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">Devices</span><span class="o">.</span><span class="fm">__delattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="n">deleted_something</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_device</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">deleted_something</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">deleted_something</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="s1">&#39;The selected </span><span class="si">%s</span><span class="s1"> object has neither a `</span><span class="si">%s</span><span class="s1">` attribute nor does &#39;</span>
                <span class="s1">&#39;it handle a </span><span class="si">%s</span><span class="s1"> object named `</span><span class="si">%s</span><span class="s1">`, which could be deleted.&#39;</span>
                <span class="o">%</span> <span class="p">(</span><span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">),</span> <span class="n">name</span><span class="p">,</span>
                   <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_contentclass</span><span class="p">),</span> <span class="n">name</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">__contains__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">device</span><span class="p">):</span>
        <span class="n">device</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_contentclass</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">device</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_devices</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="n">new</span><span class="o">.</span><span class="n">add_device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">new</span>

    <span class="k">def</span> <span class="nf">__iadd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="n">new</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">new</span><span class="o">.</span><span class="n">remove_device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="n">new</span>

    <span class="k">def</span> <span class="nf">__isub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">values</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">device</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="p">(</span><span class="n">values</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_device</span><span class="p">(</span><span class="n">device</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
                <span class="k">pass</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&lt;</span> <span class="nb">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&lt;=</span> <span class="nb">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">==</span> <span class="nb">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__ne__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">!=</span> <span class="nb">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;=</span> <span class="nb">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="nb">set</span><span class="p">(</span><span class="n">other</span><span class="o">.</span><span class="n">_devices</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nb">id</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">assignrepr</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>

<div class="viewcode-block" id="Devices.assignrepr"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Devices.assignrepr">[docs]</a>    <span class="k">def</span> <span class="nf">assignrepr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">prefix</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Return a string representation of the actual |Devices| object</span>
<span class="sd">        prefixed with the given string.&quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">repr_</span><span class="o">.</span><span class="n">preserve_strings</span><span class="p">(</span><span class="kc">True</span><span class="p">):</span>
            <span class="k">with</span> <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">ellipsis</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">optional</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
                <span class="n">prefix</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">(&#39;</span> <span class="o">%</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">classname</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
                <span class="n">repr_</span> <span class="o">=</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">assignrepr_values</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">,</span> <span class="n">prefix</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">70</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">repr_</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span></div>

    <span class="k">def</span> <span class="nf">__dir__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Just a regression test:</span>

<span class="sd">        &gt;&gt;&gt; from hydpy import dummies</span>
<span class="sd">        &gt;&gt;&gt; from hydpy.core.objecttools import assignrepr_values</span>
<span class="sd">        &gt;&gt;&gt; print(assignrepr_values(dir(dummies.nodes), &#39;&#39;, 70))</span>
<span class="sd">        add_device, assignrepr, close_files, copy, devices, group_1, group_2,</span>
<span class="sd">        group_a, group_b, keywords, na, names, nb, nc, nd, ne, open_files,</span>
<span class="sd">        prepare_allseries, prepare_obsseries, prepare_simseries,</span>
<span class="sd">        remove_device, return_always_iterables, save_allseries,</span>
<span class="sd">        save_obsseries, save_simseries</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">objecttools</span><span class="o">.</span><span class="n">dir_</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">names</span><span class="p">)</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">keywords</span><span class="p">)</span></div>


<div class="viewcode-block" id="Nodes"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Nodes">[docs]</a><span class="k">class</span> <span class="nc">Nodes</span><span class="p">(</span><span class="n">Devices</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A container for handling |Node| objects.&quot;&quot;&quot;</span>

    <span class="n">_contentclass</span> <span class="o">=</span> <span class="n">Node</span>

<div class="viewcode-block" id="Nodes.prepare_allseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Nodes.prepare_allseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">prepare_allseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call methods |Node.prepare_simseries| and |</span>
<span class="sd">        Node.prepare_obsseries|.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepare_simseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">prepare_obsseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Nodes.prepare_simseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Nodes.prepare_simseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">prepare_simseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Node.prepare_simseries| of each handled</span>
<span class="sd">        |Node| object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">node</span><span class="o">.</span><span class="n">prepare_simseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Nodes.prepare_obsseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Nodes.prepare_obsseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">prepare_obsseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Node.prepare_obsseries| of each handled</span>
<span class="sd">        |Node| object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">node</span><span class="o">.</span><span class="n">prepare_obsseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Nodes.save_allseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Nodes.save_allseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">save_allseries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call methods |Nodes.save_simseries| and |Nodes.save_obsseries|.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_simseries</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_obsseries</span><span class="p">()</span></div>

<div class="viewcode-block" id="Nodes.save_simseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Nodes.save_simseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">save_simseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |IOSequence.save_ext| of all  &quot;memory flag activated&quot;</span>
<span class="sd">        |NodeSequence| objects storing simulated  values handled (indirectly)</span>
<span class="sd">        by each |Node| object.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_nodeseries</span><span class="p">(</span><span class="s1">&#39;sim&#39;</span><span class="p">,</span> <span class="n">pub</span><span class="o">.</span><span class="n">sequencemanager</span><span class="o">.</span><span class="n">simoverwrite</span><span class="p">)</span></div>

<div class="viewcode-block" id="Nodes.save_obsseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Nodes.save_obsseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">save_obsseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |IOSequence.save_ext| of all &quot;memory flag activated&quot;</span>
<span class="sd">        |NodeSequence| objects storing observed values handled (indirectly)</span>
<span class="sd">        by each |Node| object.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_nodeseries</span><span class="p">(</span><span class="s1">&#39;obs&#39;</span><span class="p">,</span> <span class="n">pub</span><span class="o">.</span><span class="n">sequencemanager</span><span class="o">.</span><span class="n">obsoverwrite</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_save_nodeseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">seqname</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">seq</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">node</span><span class="o">.</span><span class="n">sequences</span><span class="p">,</span> <span class="n">seqname</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">seq</span><span class="o">.</span><span class="n">memoryflag</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">seq</span><span class="o">.</span><span class="n">filepath_ext</span><span class="p">):</span>
                    <span class="n">seq</span><span class="o">.</span><span class="n">save_ext</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                        <span class="s1">&#39;Due to the argument `overwrite` being `False` &#39;</span>
                        <span class="s1">&#39;it is not allowed to overwrite the already &#39;</span>
                        <span class="s1">&#39;existing file `</span><span class="si">%s</span><span class="s1">`.&#39;</span>
                        <span class="o">%</span> <span class="n">seq</span><span class="o">.</span><span class="n">filepath_ext</span><span class="p">)</span></div>


<div class="viewcode-block" id="Elements"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements">[docs]</a><span class="k">class</span> <span class="nc">Elements</span><span class="p">(</span><span class="n">Devices</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A container for handling |Element| objects.&quot;&quot;&quot;</span>

    <span class="n">_contentclass</span> <span class="o">=</span> <span class="n">Element</span>

<div class="viewcode-block" id="Elements.init_models"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.init_models">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">init_models</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Element.init_model| of each handled |Element| object</span>
<span class="sd">        and afterwards method |Parameters.update| of the |Parameters| object</span>
<span class="sd">        handled (indirectly) by each |Element| object.&quot;&quot;&quot;</span>
        <span class="n">warn</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">warnsimulationstep</span>
        <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">warnsimulationstep</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">element</span><span class="o">.</span><span class="n">init_model</span><span class="p">(</span><span class="n">clear_registry</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">IOError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                    <span class="n">temp</span> <span class="o">=</span> <span class="s1">&#39;While trying to load the control file&#39;</span>
                    <span class="k">if</span> <span class="p">((</span><span class="n">temp</span> <span class="ow">in</span> <span class="nb">str</span><span class="p">(</span><span class="n">exc</span><span class="p">))</span> <span class="ow">and</span>
                            <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">warnmissingcontrolfile</span><span class="p">):</span>
                        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;No model could be initialized for &#39;</span>
                                      <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">`&#39;</span> <span class="o">%</span> <span class="n">element</span><span class="p">)</span>
                        <span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">[</span><span class="s1">&#39;model&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">objecttools</span><span class="o">.</span><span class="n">augment_excmessage</span><span class="p">(</span>
                            <span class="s1">&#39;While trying to initialize the model of &#39;</span>
                            <span class="s1">&#39;element `</span><span class="si">%s</span><span class="s1">`&#39;</span> <span class="o">%</span> <span class="n">element</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">element</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">warnsimulationstep</span> <span class="o">=</span> <span class="n">warn</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">clear_registry</span><span class="p">()</span></div>

<div class="viewcode-block" id="Elements.connect"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.connect">[docs]</a>    <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Element.connect| of each |Element| object and</span>
<span class="sd">        function |Parameters.update| of the |Parameters| object handled</span>
<span class="sd">        (indirectly) by each |Element| object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">element</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
            <span class="n">element</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">update</span><span class="p">()</span></div>

<div class="viewcode-block" id="Elements.save_controls"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.save_controls">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">save_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controldir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projectdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">parameterstep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">simulationstep</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                      <span class="n">auxfiler</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save the control parameters of the |Model| object handled by</span>
<span class="sd">        each |Element| object and eventually the ones handled by the</span>
<span class="sd">        given |Auxfiler| object.&quot;&quot;&quot;</span>
        <span class="n">_currentdir</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">_currentdir</span>
        <span class="n">_projectdir</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">projectdir</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">controldir</span><span class="p">:</span>
                <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">currentdir</span> <span class="o">=</span> <span class="n">controldir</span>
            <span class="k">if</span> <span class="n">projectdir</span><span class="p">:</span>
                <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">projectdir</span> <span class="o">=</span> <span class="n">projectdir</span>
            <span class="k">if</span> <span class="n">auxfiler</span><span class="p">:</span>
                <span class="n">auxfiler</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">element</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">parameters</span><span class="o">.</span><span class="n">save_controls</span><span class="p">(</span>
                    <span class="n">parameterstep</span><span class="o">=</span><span class="n">parameterstep</span><span class="p">,</span>
                    <span class="n">simulationstep</span><span class="o">=</span><span class="n">simulationstep</span><span class="p">,</span>
                    <span class="n">auxfiler</span><span class="o">=</span><span class="n">auxfiler</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">_currentdir</span> <span class="o">=</span> <span class="n">_currentdir</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">projectdir</span> <span class="o">=</span> <span class="n">_projectdir</span></div>

<div class="viewcode-block" id="Elements.load_conditions"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.load_conditions">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">load_conditions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditiondir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projectdir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save the initial conditions of the |Model| object handled by</span>
<span class="sd">        each |Element| object.&quot;&quot;&quot;</span>
        <span class="n">_currentdir</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">_currentdir</span>
        <span class="n">_projectdir</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">projectdir</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">projectdir</span><span class="p">:</span>
                <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">projectdir</span> <span class="o">=</span> <span class="n">projectdir</span>
            <span class="k">if</span> <span class="n">conditiondir</span><span class="p">:</span>
                <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">currentdir</span> <span class="o">=</span> <span class="n">conditiondir</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">element</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">load_conditions</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">_currentdir</span> <span class="o">=</span> <span class="n">_currentdir</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">projectdir</span> <span class="o">=</span> <span class="n">_projectdir</span></div>

<div class="viewcode-block" id="Elements.save_conditions"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.save_conditions">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">save_conditions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">conditiondir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">projectdir</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                        <span class="n">controldir</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Save the calculated conditions of the |Model| object handled by</span>
<span class="sd">        each |Element| object.&quot;&quot;&quot;</span>
        <span class="n">_conditiondir</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">_currentdir</span>
        <span class="n">_projectdir</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">projectdir</span>
        <span class="n">_controldir</span> <span class="o">=</span> <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">_currentdir</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">projectdir</span><span class="p">:</span>
                <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">projectdir</span> <span class="o">=</span> <span class="n">projectdir</span>
            <span class="k">if</span> <span class="n">conditiondir</span><span class="p">:</span>
                <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">currentdir</span> <span class="o">=</span> <span class="n">conditiondir</span>
            <span class="k">if</span> <span class="n">controldir</span><span class="p">:</span>
                <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">currentdir</span> <span class="o">=</span> <span class="n">controldir</span>
            <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="n">element</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">save_conditions</span><span class="p">()</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">_currentdir</span> <span class="o">=</span> <span class="n">_conditiondir</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">conditionmanager</span><span class="o">.</span><span class="n">projectdir</span> <span class="o">=</span> <span class="n">_projectdir</span>
            <span class="n">pub</span><span class="o">.</span><span class="n">controlmanager</span><span class="o">.</span><span class="n">_currentdir</span> <span class="o">=</span> <span class="n">_controldir</span></div>

<div class="viewcode-block" id="Elements.trim_conditions"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.trim_conditions">[docs]</a>    <span class="k">def</span> <span class="nf">trim_conditions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Sequences.trim_conditions| of the |Sequences|</span>
<span class="sd">        object handled (indirectly) by each |Element| object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">element</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">trim_conditions</span><span class="p">()</span></div>

<div class="viewcode-block" id="Elements.reset_conditions"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.reset_conditions">[docs]</a>    <span class="k">def</span> <span class="nf">reset_conditions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Sequences.reset| of the |Sequences| object</span>
<span class="sd">        handled (indirectly) by each |Element| object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="bp">self</span><span class="p">:</span>
            <span class="n">element</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span></div>

<div class="viewcode-block" id="Elements.prepare_allseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.prepare_allseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">prepare_allseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Element.prepare_allseries| of each handled</span>
<span class="sd">        |Element| object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">element</span><span class="o">.</span><span class="n">prepare_allseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Elements.prepare_inputseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.prepare_inputseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">prepare_inputseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Element.prepare_inputseries| of each handled</span>
<span class="sd">        |Element| object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">element</span><span class="o">.</span><span class="n">prepare_inputseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Elements.prepare_fluxseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.prepare_fluxseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">prepare_fluxseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Element.prepare_fluxseries| of each handled</span>
<span class="sd">        |Element| object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">element</span><span class="o">.</span><span class="n">prepare_fluxseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Elements.prepare_stateseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.prepare_stateseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">prepare_stateseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ramflag</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |Element.prepare_stateseries| of each handled</span>
<span class="sd">        |Element| object.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">element</span><span class="o">.</span><span class="n">prepare_stateseries</span><span class="p">(</span><span class="n">ramflag</span><span class="p">)</span></div>

<div class="viewcode-block" id="Elements.save_allseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.save_allseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">save_allseries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call methods |Elements.save_inputseries|,</span>
<span class="sd">        |Elements.save_fluxseries|, and |Elements.save_stateseries|.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_inputseries</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_fluxseries</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">save_stateseries</span><span class="p">()</span></div>

<div class="viewcode-block" id="Elements.save_inputseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.save_inputseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">save_inputseries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |IOSequence.save_ext| of all &quot;memory flag activated&quot;</span>
<span class="sd">        |InputSequence| objects handled (indirectly) by each |Element|</span>
<span class="sd">        object.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_modelseries</span><span class="p">(</span><span class="s1">&#39;inputs&#39;</span><span class="p">,</span> <span class="n">pub</span><span class="o">.</span><span class="n">sequencemanager</span><span class="o">.</span><span class="n">inputoverwrite</span><span class="p">)</span></div>

<div class="viewcode-block" id="Elements.save_fluxseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.save_fluxseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">save_fluxseries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |IOSequence.save_ext| of all &quot;memory flag activated&quot;</span>
<span class="sd">        |FluxSequence| objects handled (indirectly) by each |Element|</span>
<span class="sd">        object.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_modelseries</span><span class="p">(</span><span class="s1">&#39;fluxes&#39;</span><span class="p">,</span> <span class="n">pub</span><span class="o">.</span><span class="n">sequencemanager</span><span class="o">.</span><span class="n">outputoverwrite</span><span class="p">)</span></div>

<div class="viewcode-block" id="Elements.save_stateseries"><a class="viewcode-back" href="../../../devicetools.html#hydpy.core.devicetools.Elements.save_stateseries">[docs]</a>    <span class="nd">@printtools</span><span class="o">.</span><span class="n">print_progress</span>
    <span class="k">def</span> <span class="nf">save_stateseries</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Call method |IOSequence.save_ext| of all &quot;memory flag activated&quot;</span>
<span class="sd">        |StateSequence| objects handled (indirectly) by each |Element|</span>
<span class="sd">        object.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_save_modelseries</span><span class="p">(</span><span class="s1">&#39;states&#39;</span><span class="p">,</span> <span class="n">pub</span><span class="o">.</span><span class="n">sequencemanager</span><span class="o">.</span><span class="n">outputoverwrite</span><span class="p">)</span></div>

    <span class="k">def</span> <span class="nf">_save_modelseries</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name_subseqs</span><span class="p">,</span> <span class="n">overwrite</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">printtools</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">sequences</span> <span class="o">=</span> <span class="n">element</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">sequences</span>
            <span class="n">subseqs</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sequences</span><span class="p">,</span> <span class="n">name_subseqs</span><span class="p">,</span> <span class="p">())</span>
            <span class="k">for</span> <span class="n">seq</span> <span class="ow">in</span> <span class="n">subseqs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">seq</span><span class="o">.</span><span class="n">memoryflag</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">overwrite</span> <span class="ow">or</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">seq</span><span class="o">.</span><span class="n">filepath_ext</span><span class="p">):</span>
                        <span class="n">seq</span><span class="o">.</span><span class="n">save_ext</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                            <span class="s1">&#39;Due to the argument `overwrite` being `False` &#39;</span>
                            <span class="s1">&#39;it is not allowed to overwrite the already &#39;</span>
                            <span class="s1">&#39;existing file `</span><span class="si">%s</span><span class="s1">`.&#39;</span>
                            <span class="o">%</span> <span class="n">seq</span><span class="o">.</span><span class="n">filepath_ext</span><span class="p">)</span></div>


<span class="n">autodoctools</span><span class="o">.</span><span class="n">autodoc_module</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table Of Contents</a></h3>
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../framework.html">Framework Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../modelcollection.html">Model Collection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../development.html">Development</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">HydPy 2.1-dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Module code</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Christoph Tyralla.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>